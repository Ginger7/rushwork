<!doctype html>
<html class="no-js" lang="ru">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="MobileOptimized" content="375">
        <meta name="HandheldFriendly" content="true">
        <meta name="format-detection" content="telephone=no">

        <title>Главная страница</title>

        <meta property="og:title" content="" />
        <meta property="og:url" content="" />
        <meta property="og:description" content="" />
        <meta property="og:image" content="" />
        <meta property="og:image:type" content="image/jpeg" />
        <meta property="og:image:width" content="500" />
        <meta property="og:image:height" content="300" />
        <meta property="twitter:description" content="" />
        <link rel="image_src" href="" />
        <link rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
        <link rel="manifest" href="site.webmanifest">
        <link rel="mask-icon" href="safari-pinned-tab.svg" color="#fd2015">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="theme-color" content="#ffffff">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
        <script src="static/js/separate-js/modernizr.custom.js"></script>
        <!-- раньше всех нужно -->
        <!-- <script src="https://polyfill.io/v3/polyfill.min.js?features=es2017%2Ces6%2Ces7%2CIntersectionObserver&flags=gated"></script> -->

        <!-- Стили bootstrap и др. плагинов в sass (в папках libraries, plugins) -->
        <link href="static/css/vendors.min.css" rel="stylesheet" type="text/css">

        <!-- Стили плагинов, загруженные по ссылке
    			https://cdn.jsdelivr.net/combine/npm/swiper@6.3/swiper-bundle.min.css,npm/overlayscrollbars@1.13/css/OverlayScrollbars.min.css,npm/@fancyapps/fancybox@3.5/dist/jquery.fancybox.min.css -->
        <link href="static/css/separate-css/plugins.css" rel="stylesheet" type="text/css">
        <link href="static/css/separate-css/select2.min.css" rel="stylesheet" type="text/css">
        <link href="static/css/separate-css/jquery-ui.structure.min.css" rel="stylesheet" type="text/css">
        <link href="static/css/separate-css/jquery-ui.theme.min.css" rel="stylesheet" type="text/css">

        <link href="static/css/separate-css/vue-plugins.css" rel="stylesheet" type="text/css">
        <link href="static/css/separate-css/datatables.min.css" rel="stylesheet" type="text/css">
        <link href="static/css/separate-css/jquery.flexdatalist.min.css" rel="stylesheet" type="text/css">

        <!-- Общие стили -->
        <link href="static/css/common.min.css" rel="stylesheet" type="text/css">


        <!-- Необходимые на странице скрипты: current-device 0.10, jquery v3.5, enquire.js v2.1, Bootstrap v4.5,
    		 Загружены по ссылке https://cdn.jsdelivr.net/combine/npm/current-device@0.10/umd/current-device.min.js,npm/enquire.js@2.1/dist/enquire.min.js,npm/jquery@3.5,npm/bootstrap@4.5/dist/js/bootstrap.bundle.min.js,npm/rison@0.1/js/rison.min.js,npm/throttle-debounce@3/umd/index.min.js -->
        <script src="static/js/separate-js/page-start-plugins.js"></script>

        <!-- Подключение полифилов, определение браузера и т.д. -->
        <script src="static/js/separate-js/init.js"></script>

        <!-- Vue + Vuex: https://cdn.jsdelivr.net/combine/npm/vue@2/dist/vue.js,npm/vuex@3/dist/vuex.js
    		! Для production использовать vue_vuex_prod.js !
    -->
        <script src="static/js/separate-js/vue_vuex.js"></script>
        <script src="static/js/separate-js/inputmask.min.js"></script>

        <script src="static/js/separate-js/jquery-ui.min.js"></script>
        <script src="static/js/separate-js/select2.full.min.js"></script>
        <script src="static/js/separate-js/jquery.flexdatalist.min.js"></script>
        <!--<script src="https://api-maps.yandex.ru/2.1/?apikey=818006c9-50f6-486c-926e-77ae8a141917&lang=ru-RU"
        type="text/javascript"></script>-->

        <script src="https://api-maps.yandex.ru/2.1/?apikey=818006c9-50f6-486c-926e-77ae8a141917&lang=ru_RU" type="text/javascript"></script>

        <script>
            /* Инициализация хранилища */
            Vue.use(window.Vuex);
        
            const rushwork_store = new Vuex.Store({
                state: {
                    ajaxURL: "cat_data_full_response.json", mobileMode: false
                }
            });
            function mobileModeResize() {
                enquire.register('(max-width: ' + mqBreakPoints.screenMdMax + 'px)', {
                    match: function () {
                        rushwork_store.state.mobileMode = true;
                    },
                    unmatch: function () {
                        rushwork_store.state.mobileMode = false;
                    }
                })
            }
        
            mobileModeResize();
            $(window).resize(mobileModeResize());
        </script>
    </head>

    <body class="page">


        <div class="page__wrapper">

            <header id="header">
                <div class="header-mobile d-lg-none" v-if="$store.state.mobileMode">
                    <div class="container-fluid">
                        <div class="row align-items-center justify-content-between flex-nowrap">
                            <div class="col-auto pr-0">
                                <a href="#header-cat" class="btn header-bottom__cat show-modal btn-warning w-100 h-100">
                                    <svg class="svg-icon" width="18" height="14">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#burder"></use>
                                    </svg>
                                </a>
                            </div>
                            <div class="col-auto pr-0">
                                <a href="/" class="header-logo">
                                    <img src="static/img/general/logo.svg" width="130" class="img-fluid">
                                </a>
                            </div>
                            <div class="col-auto pr-0 mr-0 ml-auto">
                                <a href="tel:84952928793">
                                    <svg class="svg-icon" width="20" height="20">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#phone"></use>
                                    </svg>
                                </a>
                            </div>
                            <div class="col-auto pr-0 ">
                                <a href="#" @click.prevent="showSearch()">
                                    <svg class="svg-icon" width="20" height="20">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#search"></use>
                                    </svg>
                                </a>
                            </div>

                            <figure class="col-auto header-mobile__icon" :data-cart="cart_items_length != 0 ? cart_items_length : false">
                                <a href="#" class="pr-1">
                                    <svg class="svg-icon" width="23" height="20">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#cart"></use>
                                    </svg>
                                </a>
                            </figure>
                        </div>
                    </div>
                </div>
                <div class="header-top d-none d-lg-block" v-if="!$store.state.mobileMode">
                    <div class="container-fluid">
                        <div class="row align-items-center justify-content-between">
                            <div class="col-lg-3 col-auto header-place">
                                <a href="/" class="header-logo">
                                    <img src="static/img/general/logo.svg" width="144" class="img-fluid">
                                </a>
                                <a href="#" class="header-map icon-text ml-1 mr-0 dropdown-city dropdown-toggle" id="dropdown-city" data-toggle="dropdown" aria-expanded="false">
                                    <svg class="svg-icon mr-1" width="12" height="15">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#map"></use>
                                    </svg>
                                    <span v-html="city"></span>
                                </a>
                                <div class="dropdown-menu dropdown-menu_city" aria-labelledby="dropdown-city">
                                    <div class="text">
                                        <p class="mb-0 text-info">Ваш город</p>
                                        <p class="text-dark" v-html="city + '?'"></p>
                                    </div>
                                    <div class="btn-flex">
                                        <a href="#city-modal" data-toggle="modal" data-target="#city-modal" class="btn btn-outline-light btn-lg">Нет</a>
                                        <a href="#" class="btn btn-primary btn-lg btn-close-dropdown">Да</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto header-social">
                                <a href="#" class="header-social__item header-social__item_icon mr-1">
                                    <svg class="svg-icon" width="20" height="20">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#whatsapp"></use>
                                    </svg>
                                </a>
                                <a href="#" class="header-social__item header-social__item_icon mr-1">
                                    <svg class="svg-icon" width="20" height="20">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#telegram"></use>
                                    </svg>
                                </a>
                                <div class="header-social__item header-social__item_phone mr-xxl-3 mr-1">
                                    <a class="dropdown-phone dropdown-toggle" href="#" id="dropdown-phone" data-toggle="dropdown" aria-expanded="false">

                                8 (495) 292-87-93

                            </a>
                                    <div class="dropdown-menu dropdown-menu_phone" aria-labelledby="dropdown-phone">
                                        <h3 class="mb-0">Нужна помощь?</h3>
                                        <small class="mb-2">Перезвоним в течение 15 минут</small>
                                        <a href="#bell-modal" role="button" data-toggle="modal" class="btn btn-primary btn-lg w-100">Заказать звонок</a>
                                    </div>
                                </div>
                                <a href="mailto:zakaz333@ks-rus.com" class="header-social__item header-social__item_email">

                            zakaz333@ks-rus.com

                        </a>
                            </div>
                            <nav class="col-auto flex-grow-1">
                                <ul class="navbar-nav">
                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle" href="#" id="nav-dropdown-1" data-toggle="dropdown" aria-expanded="false">

                                    Компания

                                </a>
                                        <ul class="dropdown-menu" aria-labelledby="nav-dropdown-1">
                                            <li><a class="dropdown-item list-item" href="#">О нас</a>
                                            </li>
                                            <li><a class="dropdown-item list-item" href="#">Объекты</a>
                                            </li>
                                            <li><a class="dropdown-item list-item" href="#">Новости</a>
                                            </li>
                                            <li><a class="dropdown-item list-item" href="#">Раскрытие информации</a>
                                            </li>
                                            <li><a class="dropdown-item list-item" href="#">Блог</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">Услуги</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">Бренды</a>
                                    </li>
                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle" href="#" id="nav-dropdown-2" data-toggle="dropdown" aria-expanded="false">

                                    Техподдержка

                                </a>
                                        <ul class="dropdown-menu" aria-labelledby="nav-dropdown-2">
                                            <li><a class="dropdown-item list-item" href="#">Техподдержка 1</a>
                                            </li>
                                            <li><a class="dropdown-item list-item" href="#">Техподдержка 2</a>
                                            </li>
                                            <li><a class="dropdown-item list-item" href="#">Техподдержка 5</a>
                                            </li>
                                            <li><a class="dropdown-item list-item" href="#">Раскрытие информации</a>
                                            </li>
                                            <li><a class="dropdown-item list-item" href="#">Блог</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">Доставка и оплата</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">Контакты</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
                <div class="header-bottom d-none d-lg-block" v-if="!$store.state.mobileMode">
                    <div class="container-fluid overflow-visible">
                        <div class="row align-items-stretch flex-nowrap">
                            <a href="/" class="col-auto header-flogo pr-0">
                                <img src="static/img/general/sm-logo.svg" width="50" class="img-fluid">
                            </a>
                            <div class="col-auto header-social">

                                <div class="header-social__item header-social__item_phone mr-1">
                                    <a class="dropdown-phone dropdown-toggle " href="#" id="dropdown-phone_2" data-toggle="dropdown" aria-expanded="false">

                                8 (495) 292-87-93

                            </a>
                                    <div class="dropdown-menu dropdown-menu_phone" aria-labelledby="dropdown-phone_2">
                                        <h3 class="mb-0">Нужна помощь?</h3>
                                        <small class="mb-2">Перезвоним в течение 15 минут</small>
                                        <a href="#bell-modal" role="button" data-toggle="modal" class="btn btn-primary btn-lg w-100">Заказать

                                    звонок</a>
                                    </div>
                                </div>
                                <a href="mailto:zakaz333@ks-rus.com" class="header-social__item header-social__item_icon mr-1">
                                    <svg class="svg-icon" width="20" height="20">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#gmail"></use>
                                    </svg>
                                </a>
                                <a href="#" class="header-social__item header-social__item_icon mr-1">
                                    <svg class="svg-icon" width="20" height="20">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#whatsapp"></use>
                                    </svg>
                                </a>
                                <a href="#" class="header-social__item header-social__item_icon">
                                    <svg class="svg-icon" width="20" height="20">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#telegram"></use>
                                    </svg>
                                </a>
                            </div>
                            <div class="col-lg-3 header-bottom__btn">
                                <a href="#header-cat" class="btn header-bottom__cat show-modal btn-warning w-100 h-100">
                                    <span>Каталог<span class="header-bottom__cat_hide"> продукции</span></span>
                                    <svg class="svg-icon" width="16" height="14">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#burder"></use>
                                    </svg>
                                </a>
                            </div>
                            <div class="col-auto flex-grow-1">
                                <form class="header-bottom__search input-group" id="page-hdr_search">
                                    <component is="vue-autosuggest" class="form-autocomplete" v-model.trim="searchQuery" :suggestions="searchOptions" :get-suggestion-value="getSuggestionValue" :section-configs="searchSectionConfigs" :input-props="searchInputProps" @input="fetchsearch">

                                        <template slot-scope="{suggestion}">
                                            <div v-if="suggestion.item.type == 'catalog'" class="cat-autosuggest" title="Выбрать">
                                                <div class="cat-autosuggest__title" v-html="suggestion.item.txt"></div>
                                                <div title="Выбрать" class="cat-autosuggest__text" v-html="suggestion.item.url"></div>
                                            </div>
                                            <div v-if="suggestion.item.type == 'item'" class="item-autosuggest">
                                                <figure class="item-autosuggest__img">
                                                    <img :src="suggestion.item.img">
                                                </figure>
                                                <div>
                                                    <div title="Выбрать" class="item-autosuggest__title mb-1" v-html="suggestion.item.txt"></div>
                                                    <div title="Выбрать" class="item-autosuggest__price" v-html="suggestion.item.price"></div>
                                                </div>
                                            </div>
                                            <div v-if="suggestion.item.type != 'catalog' && suggestion.item.type != 'item'" class="cat-autosuggest">
                                                <div class="cat-autosuggest__text" v-html="suggestion.item.txt"></div>
                                            </div>
                                        </template>

                                        <template slot="after-input">
                                            <a href="#" role="button" class="form-autocomplete_clear" v-if="search.length" @click.prevent="clearField('search')">
                                                <i class="icon-sharp">close</i>
                                            </a>
                                        </template>

                                        <template slot="before-suggestions">
                                            <span v-if="!searchOptions.length"></span>
                                        </template>

                                    </component>

                                    <input type="hidden" name="q" v-if="searchQuery" :value="search.length ? search : searchQuery">
                                    <div class="input-group-append">
                                        <button class="btn btn-primary btn-md">
                                            <svg class="svg-icon mr-1" width="18" height="18">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#search"></use>
                                            </svg>
                                        </button>
                                    </div>
                                </form>
                            </div>


                            <div class="col-auto">
                                <div class="header-btns">
                                    <a href="#user-modal" role="button" data-toggle="modal" class="header-btns__item">
                                        <figure class="header-btns__icon">
                                            <svg class="svg-icon" width="18" height="20">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#person"></use>
                                            </svg>
                                        </figure>
                                        <span>Вход</span>
                                    </a>
                                    <a href="#" class="header-btns__item">
                                        <figure class="header-btns__icon" :data-favorite="cart_fav_length != 0 ? cart_fav_length : false">
                                            <svg class="svg-icon" width="14" height="19">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#bookmark"></use>
                                            </svg>
                                        </figure>
                                        <span>Избранное</span>
                                    </a>

                                    <a href="#" class="header-btns__item">

                                        <figure class="header-btns__icon">
                                            <svg class="svg-icon" width="14" height="18">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#compare"></use>
                                            </svg>
                                        </figure>
                                        <span>Сравнения</span>
                                    </a>
                                    <a href="#" class="header-btns__item">
                                        <figure class="header-btns__icon" :data-cart="cart_items_length != 0 ? cart_items_length : false">
                                            <svg class="svg-icon" width="23" height="20">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#cart"></use>
                                            </svg>
                                        </figure>
                                        <span>Корзина</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="header-cat" id="header-cat" :class="{'header-cat_mobile': $store.state.mobileMode}">
                    <div class="header-cat__header" v-if="!$store.state.mobileMode">
                        <div class="container-fluid">
                            <div class="row flex-nowrap align-items-center">
                                <div class="col">
                                    Добро пожаловать в торговый дом «RUSHWORK». Если Вам понадобится наша помощь, позвоните нам по телефону <span class="text-nowrap">8 (495) 292-87-93</span>
                                </div>
                                <div class="col-auto">
                                    <a href="#" class="btn btn-dark">Заказать обратный звонок</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="header-cat__header" v-if="$store.state.mobileMode">
                        <div class="container-fluid">
                            <div class="row flex-nowrap align-items-center">
                                <div class="col-auto">
                                    <a href="#" class="header-map icon-text">
                                        <svg class="svg-icon mr-1" width="12" height="15">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#map-white"></use>
                                        </svg>
                                        <span v-html="city"></span>
                                    </a>
                                </div>
                                <div class="col-auto pr-0 mr-0 ml-auto">
                                    <a href="#" class="btn-login">Вход / Регистрация</a>
                                </div>
                                <div class="col-auto pr-lg-3">
                                    <a href="#header-cat" class="hide-modal">
                                        <svg class="svg-icon" width="16" height="16">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="header-cat__search" v-if="!$store.state.mobileMode">
                        <div class="container-fluid">
                            <div class="row flex-nowrap align-items-center justify-content-between">
                                <div class="col-lg-3">
                                    <div class="h1">Каталог</div>
                                </div>
                                <div class="col-auto flex-grow-1 text-center">
                                    <form class="header-cat__search-form input-group ml-0 mr-auto" id="page-hdr_search-cat">
                                        <input type="search" class="form-control" placeholder="Поиск" aria-label="Поиск">
                                        <div class="input-group-append">
                                            <button class="btn btn-white btn-sm">
                                                <svg class="svg-icon mr-1" width="18" height="18">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#search"></use>
                                                </svg>
                                            </button>
                                        </div>
                                    </form>
                                </div>
                                <div class="col-auto">
                                    <a href="#header-cat" class="hide-modal">
                                        <svg class="svg-icon" width="21" height="21">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="header-cat__body">
                        <div class="container-fluid">
                            <div class="row flex-lg-nowrap header-cat__row">
                                <div class="col-lg-3 header-cat__left">
                                    <div class="mcats mcats_tabs">
                                        <a class="mcats__item active" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="shutvalves-tab" data-toggle="tab" href="#shutvalves" role="tab" data-link="https://yandex.ru/" aria-controls="shutvalves" aria-selected="true">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="33" height="38">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#shutvalves"></use>
                                                </svg>
                                            </figure>
                                            Запорная арматура
                                        </a>
                                        <a class="mcats__item" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="reversevalves-tab" data-toggle="tab" href="#valves" role="tab" aria-controls="reversevalves" aria-selected="false">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="33" height="31">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#reversevalves"></use>
                                                </svg>
                                            </figure>
                                            Обратная арматура
                                        </a>
                                        <a class="mcats__item" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="safetyvalves-tab" data-toggle="tab" href="#safetyvalves" role="tab" aria-controls="safetyvalves" aria-selected="false">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="37" height="52">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#safetyvalves"></use>
                                                </svg>
                                            </figure>
                                            Предохранительная арматура
                                        </a>
                                        <a class="mcats__item" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="protectivevalves-tab" data-toggle="tab" href="#protectivevalves" role="tab" aria-controls="protectivevalves" aria-selected="false">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="37" height="42">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#protectivevalves"></use>
                                                </svg>
                                            </figure>
                                            Защитная арматура
                                        </a>
                                        <a class="mcats__item" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="automation-tab" data-toggle="tab" href="#automation" role="tab" aria-controls="automation" aria-selected="false">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="39" height="34">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#automation"></use>
                                                </svg>
                                            </figure>
                                            Автоматизация
                                        </a>
                                        <a class="mcats__item" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="pipelines-tab" data-toggle="tab" href="#pipelines" role="tab" aria-controls="pipelines" aria-selected="false">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="42" height="42">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#pipelines"></use>
                                                </svg>
                                            </figure>
                                            Детали трубопроводов
                                        </a>
                                        <a class="mcats__item" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="controlvalves-tab" data-toggle="tab" href="#controlvalves" role="tab" aria-controls="controlvalves" aria-selected="false">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="38" height="42">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#controlvalves"></use>
                                                </svg>
                                            </figure>
                                            Регулирующая арматура
                                        </a>
                                        <a class="mcats__item" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="separatingvalves-tab" data-toggle="tab" href="#separatingvalves" role="tab" aria-controls="separatingvalves" aria-selected="false">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="34" height="51">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#separatingvalves"></use>
                                                </svg>
                                            </figure>
                                            Разделительная арматура
                                        </a>
                                        <a class="mcats__item" :class="{'mcats__item_mobile' : $store.state.mobileMode}" id="fasteners-tab" data-toggle="tab" href="#fasteners" role="tab" aria-controls="fasteners" aria-selected="false">
                                            <figure class="mcats__img">
                                                <svg class="svg-icon" width="45" height="42">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#fasteners"></use>
                                                </svg>
                                            </figure>
                                            Фланцы и крепеж
                                        </a>
                                    </div>
                                    <div class="d-none d-lg-block" v-if="!$store.state.mobileMode">
                                        <h2 class="mb-2">Подбор оборудования по спецификации</h2>
                                        <div class="text text-info mb-3">Отправьте нам спецификацию и мы сами выполним подбор</div>
                                        <a href="#config-modal" data-toggle="modal" class="btn btn-secondary btn-sm justify-content-between">
                                            <span>Отправить спецификацию</span>
                                            <svg class="svg-icon ml-1" width="22" height="22">
                                                <use xlink:href="/static/img/svg-sprite/svg-symbols.svg#file"></use>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                                <div class="d-lg-none header-cat__menu">
                                    <nav class="">
                                        <ul class="navbar-nav">
                                            <li class="nav-item dropdown">
                                                <a class="nav-link dropdown-toggle" href="#" id="nav-dropdown-1" data-toggle="dropdown" aria-expanded="false">
                                            Компания
                                        </a>
                                                <ul class="dropdown-menu" aria-labelledby="nav-dropdown-1">
                                                    <li><a class="dropdown-item list-item" href="#">О нас</a>
                                                    </li>
                                                    <li><a class="dropdown-item list-item" href="#">Объекты</a>
                                                    </li>
                                                    <li><a class="dropdown-item list-item" href="#">Новости</a>
                                                    </li>
                                                    <li><a class="dropdown-item list-item" href="#">Раскрытие информации</a>
                                                    </li>
                                                    <li><a class="dropdown-item list-item" href="#">Блог</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#" class="nav-link">Услуги</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#" class="nav-link">Бренды</a>
                                            </li>
                                            <li class="nav-item dropdown">
                                                <a class="nav-link dropdown-toggle" href="#" id="nav-dropdown-2" data-toggle="dropdown" aria-expanded="false">
                                            Техподдержка
                                        </a>
                                                <ul class="dropdown-menu" aria-labelledby="nav-dropdown-2">
                                                    <li><a class="dropdown-item list-item" href="#">Техподдержка 1</a>
                                                    </li>
                                                    <li><a class="dropdown-item list-item" href="#">Техподдержка 2</a>
                                                    </li>
                                                    <li><a class="dropdown-item list-item" href="#">Техподдержка 5</a>
                                                    </li>
                                                    <li><a class="dropdown-item list-item" href="#">Раскрытие информации</a>
                                                    </li>
                                                    <li><a class="dropdown-item list-item" href="#">Блог</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#" class="nav-link">Доставка и оплата</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#" class="nav-link">Контакты</a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                                <div class="d-lg-none header-cat__contacts">
                                    <div class="row align-content-center">
                                        <div class="col-6 pb-3">
                                            <a href="tel:84952928793" class="header-cat__phone">
                                        8 (495) 292-87-93
                                    </a>
                                        </div>
                                        <div class="col-6 pb-3">
                                            <a href="mailto:zakaz333@ks-rus.com" class="header-cat__mail">
                                        zakaz333@ks-rus.com
                                    </a>
                                        </div>
                                        <div class="col-6 pb-3">
                                            <a href="#" class="btn btn-outline-light font-weight-normal w-100">
                                                <svg class="svg-icon mr-1" width="18" height="18">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#whatsapp"></use>
                                                </svg>
                                                Wats Up</a>
                                        </div>
                                        <div class="col-6">

                                            <a href="#" class="btn btn-outline-light font-weight-normal w-100">
                                                <svg class="svg-icon mr-1" width="20" height="20">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#telegram"></use>
                                                </svg>
                                                Telegram</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-9 header-cat__right">
                                    <div class="header-cat_container" id="header-cat_container">
                                        <div class="header-cat__header" v-if="$store.state.mobileMode">
                                            <div class="container-fluid">
                                                <div class="row flex-nowrap align-items-center justify-content-between">
                                                    <div class="col-auto">
                                                        <a href="#" class="header-map icon-text hide-modal-back">
                                                            <svg class="svg-icon mr-1" width="17" height="14">
                                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#back"></use>
                                                            </svg>
                                                        </a>
                                                    </div>
                                                    <div class="col-auto pr-3">
                                                        <a href="#header-cat" class="hide-modal-cat">
                                                            <svg class="svg-icon" width="16" height="16">
                                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                                            </svg>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-content" id="headerTabs">

                                            <div class="tab-pane fade show active" id="shutvalves" role="tabpanel" aria-labelledby="shutvalves-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <a href="#" class="header-cat__title">Задвижки</a>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Задвижки клиновые</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Задвижки шиберные</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <a href="#" class="header-cat__title">Затворы дисковые поворотные</a>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Затворы сталь</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Затворы чугун</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">С электроприводом</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">С пневмноприоводом</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">С ручным управлением</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">С ISO - фланцем</a>
                                                                </li>
                                                                <hr>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Установка пневмопривода,
                                                                электропривода и конц выключателей</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Краны шаровые</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Краны чугун</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Краны нерж. сталь</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Краны латунь</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Краны сталь</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">С электроприводом</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">С ручкой</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">С редуктором</a>
                                                                </li>
                                                                <hr/>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Установка пневмопривода,
                                                                электропривода и конц выключателей</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div>

                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Вентили</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Вентили бронза</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Вентили сталь</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Вентили чугун</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Вентили нерж. сталь</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="reversevalves" role="tabpanel" aria-labelledby="reversevalves-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Пневмоприводы</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Rushwork</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Plesk</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Genebre</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">С возвратной
                                                                пружиной</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Поворотные</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Одностороннего
                                                                действия</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Присоединетельный
                                                                фланец
                                                                f05</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Присоединетельный
                                                                фланец
                                                                f10</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Присоединетельный
                                                                фланец
                                                                f07</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="safetyvalves" role="tabpanel" aria-labelledby="safetyvalves-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Неполнооборотные</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Для запорной
                                                                арматуры</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Многооборотные</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Для запорной
                                                                арматуры</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="protectivevalves" role="tabpanel" aria-labelledby="protectivevalves-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Многооборотные</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Для запорной
                                                                арматуры</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="automation" role="tabpanel" aria-labelledby="automation-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Многооборотные</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Для запорной
                                                                арматуры</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="pipelines" role="tabpanel" aria-labelledby="pipelines-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Многооборотные</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Для запорной
                                                                арматуры</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="controlvalves" role="tabpanel" aria-labelledby="controlvalves-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Многооборотные</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Для запорной
                                                                арматуры</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="separatingvalves" role="tabpanel" aria-labelledby="separatingvalves-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Многооборотные</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Для запорной
                                                                арматуры</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="fasteners" role="tabpanel" aria-labelledby="fasteners-tab">
                                                <div class="header-cat_menu">
                                                    <div>
                                                        <div class="d-inline-block">
                                                            <div class="header-cat__title">Многооборотные</div>
                                                            <ul class="header-cat__list">
                                                                <li>
                                                                    <a href="#" class="header-cat__link list-item">Для запорной
                                                                арматуры</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="header-cat_banners d-none d-lg-block pb-10">
                                            <div class="row">
                                                <a href="#" class="col-lg-6">
                                                    <img class="w-100 img-fluid" src="static/img/content/banners/hdr-banner-1.jpg">
                                                </a>
                                                <a href="#" class="col-lg-6">
                                                    <img class="w-100 img-fluid" src="static/img/content/banners/hdr-banner-2.jpg">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--
        
        <div class="header-cat header-cat_mobile" v-if="$store.state.mobileMode" id="header-cat">
            <div class="header-cat__header">
                <div class="container-fluid">
                    <div class="row flex-nowrap align-items-center">
                        <div class="col-auto">
                            <a href="#" class="header-map icon-text">
                                <svg class="svg-icon mr-1" width="12" height="15">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#map-white"></use>
                                </svg>
                                <span v-html="city"></span>
                            </a>
                        </div>
                        <div class="col-auto pr-0 mr-0 ml-auto">
                            <a href="#" class="btn-login">Вход  /  Регистрация</a>
                        </div>
                        <div class="col-auto pr-3">
                            <a href="#header-cat" class="hide-modal">
                                <svg class="svg-icon" width="16" height="16">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-cat__body">
                <div class="container-fluid">
        
                </div>
            </div>
        </div>
        -->

                <div class="mobile-search" id="search-modal" tabindex="-1" aria-hidden="true">
                    <form class="header-bottom__search input-group" id="page-modal_search">
                        <component is="vue-autosuggest" class="form-autocomplete" v-model.trim="searchQuery" :suggestions="searchOptions" :get-suggestion-value="getSuggestionValue" :section-configs="searchSectionConfigs" :input-props="searchInputProps" @input="fetchsearch">

                            <template slot-scope="{suggestion}">
                                <div v-if="suggestion.item.type == 'catalog'" class="cat-autosuggest" title="Выбрать">
                                    <div class="cat-autosuggest__title" v-html="suggestion.item.txt"></div>
                                    <div title="Выбрать" class="cat-autosuggest__text" v-html="suggestion.item.url"></div>
                                </div>
                                <div v-if="suggestion.item.type == 'item'" class="item-autosuggest">
                                    <figure class="item-autosuggest__img">
                                        <img :src="suggestion.item.img">
                                    </figure>
                                    <div>
                                        <div title="Выбрать" class="item-autosuggest__title mb-1" v-html="suggestion.item.txt"></div>
                                        <div title="Выбрать" class="item-autosuggest__price" v-html="suggestion.item.price"></div>
                                    </div>
                                </div>
                                <div v-if="suggestion.item.type != 'catalog' && suggestion.item.type != 'item'" class="cat-autosuggest">
                                    <div class="cat-autosuggest__text" v-html="suggestion.item.txt"></div>
                                </div>
                            </template>

                            <template slot="after-input">
                                <a href="#" role="button" class="form-autocomplete_clear" v-if="search.length" @click.prevent="clearField('search')">
                                    <i class="icon-sharp">close</i>
                                </a>
                            </template>

                            <template slot="before-suggestions">
                                <span v-if="!searchOptions.length"></span>
                            </template>

                        </component>

                        <input type="hidden" name="q" v-if="searchQuery" :value="search.length ? search : searchQuery">
                        <div class="input-group-append">
                            <button class="btn btn-primary btn-md">
                                <svg class="svg-icon mr-1" width="18" height="18">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#search"></use>
                                </svg>
                            </button>
                        </div>
                    </form>
                </div>

            </header>

            <script>
                /* START - Хранение данных корзины */
                rushwork_store.registerModule('hdr', {
                    namespaced: true,
            
                    state: () => ({
                        city: "Санкт-петекбург",
                        favorites: [],
                        comparison: [],
                        cart_items: [],
                        cart_length: 0,
                        item: {},
                    }),
            
                    getters: {
                        /* selectedAmount: state => {
                             return Object.values(state.selectedItems).reduce((sum, item) => {
                                 return !!(item.amount % 1) ? sum + Math.round((item.amount / item.item.step) * 10) / 10 : sum + item.amount;
                             }, 0);
                         },*/
                    },
            
                    mutations: {
                        add_selected_prod: (state, payload) => {
                            Vue.set(state.selectedItems, payload.id, payload.data);
                        },
            
                        set_selected_prod: (state, payload) => {
            
                            let id = payload.id
                            let selected = state.selectedItems[id] ? state.selectedItems[id].amount : 0;
            
                            if (payload.amount === 0 && !!state.selectedItems[id]) {
                                Vue.delete(state.selectedItems, id);
                            } else if (selected !== payload.amount) {
                                if (state.selectedItems[id]) {
                                    Vue.set(state.selectedItems[id], 'amount', payload.amount);
                                } else {
                                    Vue.set(state.selectedItems, id, payload.item);
                                }
                            }
                        },
            
                        rem_selected_prod: (state, id) => {
                            Vue.delete(state.selectedItems, id);
                        },
                        change_length: (state, length) => {
                            Vue.set(state, 'cart_length', length);
                        },
            
                        change_cart: (state, cart_items) => {
                            Vue.set(state, 'cart_items', cart_items);
                        },
            
                        clear_cart: (state) => {
                            Vue.set(state, 'selectedItems', {});
                        },
            
                        change_city: (state, title) => {
                            Vue.set(state, 'city', title);
                        },
            
                        toggle_fav_prod: (state, id) => {
                            let pos = state.favorites.indexOf(id)
            
                            if (pos < 0) {
                                state.favorites.push(id)
                            } else {
                                state.favorites.splice(pos, 1);
                            }
                        },
                        toggle_comp_prod: (state, id) => {
                            let pos = state.comparison.indexOf(id)
                            if (pos < 0) {
                                state.comparison.push(id)
                            } else {
                                state.comparison.splice(pos, 1);
                            }
                        },
            
                        set_discount: (state, amount) => {
                            state.discount = amount
                        }
                    },
            
                    actions: {
                        changeItem({dispatch, commit, getters, state, rootState}, {itemdata, id}) {
                            let data = itemdata;
                            data['id'] = id;
                            console.log(data)
                            Vue.set(state, 'item', data);
                        },
                        pushFav({dispatch, commit, getters, state, rootState}, {id}) {
                            return new Promise((resolve, reject) => {
                                let data = {}
                                let pos = state.favorites.indexOf(id)
            
                                if (pos < 0) {
                                    state.favorites.push(id)
                                    data = {"action": 'pushFavorite'}
                                } else {
                                    state.favorites.splice(pos, 1);
                                    data = {"action": 'delFavorite'}
                                }
                                data.id = id;
            
                                $.ajax({
                                    url: rootState.ajaxURL,
                                    type: "POST",
                                    data: data
                                }).done(function (resp) {
            
                                });
                            })
                        },
                        pushСomp({dispatch, commit, getters, state, rootState}, {id}) {
                            return new Promise((resolve, reject) => {
                                let data = {}
            
                                let pos = state.comparison.indexOf(id)
                                if (pos < 0) {
                                    state.comparison.push(id)
                                    data = {"action": 'pushComparison'}
                                } else {
                                    state.comparison.splice(pos, 1);
                                    data = {"action": 'delComparison'}
                                }
                                data.id = id;
            
                                $.ajax({
                                    url: rootState.ajaxURL,
                                    type: "POST",
                                    data: data
                                }).done(function (resp) {
            
                                });
                            })
                        },
                        delСomp({dispatch, commit, getters, state, rootState}, {id}) {
                            return new Promise((resolve, reject) => {
                                let pos = state.comparison.indexOf(id)
                                if (pos > 0) {
                                    state.comparison.splice(pos, 1);
                                }
                            })
                        },
                        delFav({dispatch, commit, getters, state, rootState}, {id}) {
                            return new Promise((resolve, reject) => {
                                let pos = state.comparison.indexOf(id)
                                if (pos > 0) {
                                    state.comparison.splice(pos, 1);
                                }
                            })
                        },
                        changeLength({dispatch, commit, getters, state, rootState}, {length}) {
                            return new Promise((resolve, reject) => {
                                commit('change_length', length)
                            })
                        },
                        changeCart({dispatch, commit, getters, state, rootState}, {cart_items}) {
                            return new Promise((resolve, reject) => {
                                commit('change_cart', cart_items)
                            })
                        },
                        cartAction({dispatch, commit, getters, state, rootState}, {act, itemdata, amount, var_id}) {
                            return new Promise((resolve, reject) => {
                                let data = {"action": act}
                                if (typeof itemdata == 'object') data.id = itemdata['id'];
                                if (var_id) data.id = var_id;
                                if (amount !== undefined) data.amount = amount
                                if (act == 'ClearCart') data.clear = true
            
                                $.ajax({
                                    url: rootState.ajaxURL,
                                    type: "POST",
                                    data: data
                                }).done(function (resp) {
                                    if (resp.success) {
                                        commit('change_length', resp.cart_length)
                                        commit('change_cart', resp.cart_items)
                                    } else {
            
                                        $('#answer-status').addClass('error')
                                        $('#answer-title').html('Возникла ошибка связи с сервером')
                                        $('#answer-text').html('Повторите попытку позже!')
                                        $('#answer-modal').modal('show');
                                    }
                                });
                            })
                        },
                    }
            
                });
                /* END - Хранение данных корзины */
            
                $(function () {
            
                    const {throttle} = window.throttleDebounce
                    if (hdr_data) {
            
                        rushwork_store.state.hdr = {
                            "favorites": hdr_data.favorites || [],
                            "comparison": hdr_data.comparison || [],
                            "cart_items": hdr_data.cart_items || [],
                            "cart_length": hdr_data.cart_length || 0,
                        };
            
            
                        let headerForm = new Vue({
                            el: '#header',
                            delimiters: ['[[', ']]'],
                            store: rushwork_store,
                            data() {
                                return {
                                    tab: 'driving',
                                    frases: searchData.frases,
                                    isLoading: false,
                                    searching: true,
            
            
                                    search: '',
                                    searchQuery: '',
                                    searchOptions_server: [],
            
                                    searchSectionConfigs: {
                                        catalog: {
                                            limit: 5,
                                            onSelected: (s) => {
                                                if (s.item.href) window.location.href = s.item.href
                                                else this.search = s.item.value;
                                            }
                                        },
                                        item: {
                                            limit: 5,
                                            onSelected: (s) => {
                                                if (s.item.href) window.location.href = s.item.href
                                                else this.search = s.item.value;
                                            }
                                        }
                                    },
                                }
                            },
                            computed: {
                                ...Vuex.mapState('hdr', {
                                    //cart_items: state => Object.values(state.selectedItems),
                                    cart_items_length: state => state.cart_length,
                                    cart_fav_length: state => Object.keys(state.favorites).length,
                                    city: state => state.city,
                                }),
                                searchInputProps() {
                                    return {
                                        id: 'form-autocomplete--search',
                                        class: 'form-control',
                                        placeholder: this.frases.searchSelect,
                                    }
                                },
            
                                searchOptions() {
            
                                    let item = []
                                    let catalog = []
                                    let final = []
            
                                    this.searchOptions_server.forEach(({txt, value, img, href, url, type, price}) => {
                                        if (type == 'item') item.push({txt, img, value, href, type, price})
                                        else if (type == 'catalog') catalog.push({txt, type, href, url, value})
                                    });
            
                                    if (catalog.length) {
                                        final.push({
                                            name: 'catalog',
                                            data: catalog
                                        })
                                    }
                                    if (item.length) {
                                        final.push({
                                            name: 'item',
                                            data: item
                                        })
                                    }
                                    if (!item.length && !catalog.length && !this.searching) {
                                        final = [{
                                            name: 'default',
                                            data: [{
                                                txt: this.frases.notFound
                                            }]
                                        }]
                                    }
            
                                    return final
                                },
            
                                btnDisabled() {
                                    return !(this.searchQuery.length > 2 || this.search.length)
                                }
                            },
                            mounted() {
                                this.isLoading = false
                            },
                            methods: {
                                getSuggestionValue(suggestion) {
                                    return suggestion.item.txt;
                                },
            
                                hideModal(id) {
                                    $('header').removeClass('blur');
                                    $(id).removeClass('open');
                                    $('body').removeClass('fixed');
                                },
            
                                showSearch() {
                                    console.log('ahafha')
                                  $('#search-modal').toggleClass('open')
                                },
            
                                clearField(name) {
                                    this[name] = ''
                                    this[name + 'Query'] = ''
                                },
            
                                fetchsearch(query) {
                                    if (!query || query.length < 2) return;
                                    this.fetchOptions('q', {query})
                                },
            
                                fetchOptions: throttle(500, (name, data) => {
                                    headerForm.searching = true
            
                                    let action = ""
                                    switch (name) {
                                        case "catalog":
                                            action = "GetCatalog";
                                            break;
                                        case "item":
                                            action = "GetItem";
                                            break;
                                        default:
                                            action = "GetItem";
                                    }
            
                                    const body = {
                                        query: data.query,
                                        fork: {action: action}
                                    }
                                    if (data.filter) body.filter = data.filter
            
                                    headerForm.isLoading = true
            
                                    return fetch(name + '.json', {
                                        method: 'POST',
                                        cache: 'force-cache', // *default, no-cache, reload, force-cache, only-if-cached
                                        headers: {
                                            'Content-Type': 'application/x-www-form-urlencoded; charset = UTF-8',
                                        },
                                        body: $.param(body),
                                    })
                                        .then(fetchHelpers.checkStatus)
                                        .then(fetchHelpers.parseJSON)
                                        .then((resp) => {
                                            if (resp.code == 200) {
                                                headerForm[name + 'Options_server'] = resp.data
                                            } else {
                                                //SSnotifyе.error(i18n_phrases.serverError, //SSnotifyе_defaults);
                                            }
                                        })
                                        .catch((resp) => {
                                            console.log('request failed', resp)
                                        })
                                        .finally(() => {
                                            headerForm.isLoading = false
                                            headerForm.searching = false
                                        })
                                }),
                                changeTab: function (e, title) {
                                    e.preventDefault();
                                    this.tab = title;
                                }
                            },
                            created() {
                                let vm = this;
                                let searchParams = new URLSearchParams(window.location.search);
                                let q = searchParams.get('q');
                                vm.searchQuery = q;
                                ymaps.ready(function () {
                                    if (ymaps && ymaps.geolocation) {
                                        vm.$store.commit('hdr/change_city', ymaps.geolocation.city)
                                    } else {
                                        vm.$store.commit('hdr/change_city', 'Санкт-петекбург')
                                    }
                                });
                            }
                        })
                    }
                });
            </script>
            <script src="https://cdn.jsdelivr.net/npm/vue-autosuggest@2.2/dist/vue-autosuggest.js" integrity="sha256-gbP+j9bi/NO+kuBg/skK4TNAnGtO/K4ZEA6gRsaKgBk=" crossorigin="anonymous">
                Vue.use(window.VueAutosuggest);
            </script>
            <script>
                let hdr_data = {
                    city: 'Москва',
                    favorites: ['5678'],
                    comparison: ['1234'],
                    cart_items: [ "5678"],
                    cart_length: 5,
            
                    catalog: {
                        "driving": {
                            "title": "Пневмоприводы",
                            "list": [
                                {
                                    "link": "catalog.html",
                                    "name": "Rushwork"
                                },
                                {
                                    "link": "catalog.html",
                                    "name": "Plesk"
                                },
                                {
                                    "link": "catalog.html",
                                    "name": "Genebre"
                                },
                                {
                                    "link": "catalog.html",
                                    "name": "С возвратной пружиной"
                                },
                                {
                                    "link": "catalog.html",
                                    "name": "Поворотные"
                                },
                                {
                                    "link": "catalog.html",
                                    "name": "Одностороннего действия"
                                },
                                {
                                    "link": "catalog.html",
                                    "name": "Присоединетельный фланец f05"
                                },
                                {
                                    "link": "catalog.html",
                                    "name": "Присоединетельный фланец f15"
                                },
                                {
                                    "link": "catalog.html",
                                    "name": "Присоединетельный фланец f15"
                                },
                            ]
                        },
                    }
                }
            </script>
            <script>
                const searchData = {
                    frases: {
                        notFound: "К сожалению, подходящих вариантов не&nbsp;найдено, нажмите кнопку поиска для&nbsp;поиска по&nbsp;всему каталогу",
                        searchSelect: " Введите название товара, категории или бренда",
                    }
                };
            </script>
            <div class="header-cat header-form" id="header-form">
                <div class="header-cat__header d-none d-lg-block" v-if="!$store.state.mobileMode">
                    <div class="container-fluid">
                        <div class="row flex-nowrap align-items-center">
                            <div class="col">
                                Добро пожаловать в торговый дом «RUSHWORK». Если Вам понадобится наша помощь, позвоните нам по телефону 8 (495) 292-87-93
                            </div>
                            <div class="col-auto">
                                <a href="#" class="btn btn-dark">Заказать обратный звонок</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-cat__search" v-if="!$store.state.mobileMode">
                    <div class="container-fluid">
                        <div class="row flex-nowrap align-items-center justify-content-between">
                            <div class="col-auto">
                                <h1>Форма связи</h1>
                            </div>
                            <div class="col-auto">
                                <a href="#header-form" class="hide-modal">
                                    <svg class="svg-icon" width="21" height="21">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-cat__body">
                    <div class="container-fluid">
                        <div class="row flex-lg-nowrap">
                            <div class="col-lg-3">
                                <div class="form-tabs-title">
                                    <a class="form-tabs-title__item active" id="form-stem-tab-1" data-toggle="tab" href="#form-stem-1" role="tab" aria-controls="driving" aria-selected="true">
                                        <figure class="form-tabs-title__img">
                                            <svg class="svg-icon" width="48" height="48">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#eye-2"></use>
                                            </svg>
                                        </figure>
                                        <div>
                                            <h3>Подобрать оборудование</h3>
                                            <div class="text text-info">ПЭК, Деловые линии</div>
                                        </div>
                                    </a>
                                    <a class="form-tabs-title__item" id="form-stem-tab-2" data-toggle="tab" href="#form-stem-2" role="tab" aria-controls="valves" aria-selected="false">
                                        <figure class="form-tabs-title__img">
                                            <svg class="svg-icon" width="48" height="48">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#document"></use>
                                            </svg>
                                        </figure>
                                        <div>
                                            <h3>Скачать опросный лист</h3>
                                            <div class="text text-info">Заполнение займет пару минут</div>
                                        </div>
                                    </a>
                                    <a class="form-tabs-title__item" id="form-stem-tab-3" data-toggle="tab" href="#form-stem-3" role="tab" aria-controls="automation" aria-selected="false">
                                        <figure class="form-tabs-title__img">
                                            <svg class="svg-icon" width="48" height="48">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#headset"></use>
                                            </svg>
                                        </figure>
                                        <div>
                                            <h3>Связаться со специалистом</h3>
                                            <div class="text text-info">Поможет, расскажет, подскажет</div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-5 offset-lg-1">
                                <div class="header-cat_container" id="header-cat_container">
                                    <div class="tab-content" id="formTabs">
                                        <div class="tab-pane fade show active" id="form-stem-1" role="tabpanel" aria-labelledby="form-stem-tab-1">
                                            <h2 class="pb-2 mb-2 pb-lg-4 mb-lg-4 bb-1">Подобрать оборудование</h2>
                                            <div class="custom-control custom-checkbox pb-1 pb-lg-4">
                                                <input type="checkbox" class="custom-control-input" id="form-stem-1__input-1" name="form-stem-1__checkbox">
                                                <label class="custom-control-label" for="form-stem-1__input-1">Получить цену по маркеровке / паспорту / фото</label>
                                            </div>
                                            <div class="custom-control custom-checkbox pb-1 pb-lg-4 pt-1">
                                                <input type="checkbox" class="custom-control-input" id="form-stem-1__input-2" name="form-stem-1__checkbox">
                                                <label class="custom-control-label" for="form-stem-1__input-2">Расчитать по параметрам среды / системы</label>
                                            </div>
                                            <div class="custom-control custom-checkbox pb-1 pb-lg-4 pt-1">
                                                <input type="checkbox" class="custom-control-input" id="form-stem-1__input-3" name="form-stem-1__checkbox">
                                                <label class="custom-control-label" for="form-stem-1__input-3">Рассчитать стоимость по опросному листу</label>
                                            </div>
                                            <div class="custom-control custom-checkbox pb-1 pb-lg-4 pt-1">
                                                <input type="checkbox" class="custom-control-input" id="form-stem-1__input-4" name="form-stem-1__checkbox">
                                                <label class="custom-control-label" for="form-stem-1__input-4">Получить подбор по специвикации
                                                </label>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <a href="#" class="btn btn-outline-light text-info btn-back font-weight-normal">
                                                    <svg class="svg-icon mr-1" width="7" height="6">
                                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#back"></use>
                                                    </svg>
                                                    <span>Назад</span>
                                                </a>
                                                <a class="btn btn-primary btn-next font-weight-normal pt-1" data-toggle="tab" href="#form-stem-2" role="tab" aria-controls="driving" aria-selected="false">
                                            Далее
                                            <svg class="svg-icon ml-1" width="7" height="6">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#next"></use>
                                            </svg>
                                        </a>
                                            </div>
                                            <a href="#" class="btn btn-secondary btn-md mt-3 mt-lg-5 mt-xl-12">
                                        Я затрудняюсь сделать выбор, перезвоните мне!
                                    </a>
                                        </div>
                                        <div class="tab-pane fade" id="form-stem-2" role="tabpanel" aria-labelledby="form-stem-tab-2">
                                            <h2 class="pb-2 mb-2 pb-lg-4 mb-lg-4 bb-1">Отправить опросный лист</h2>
                                            <a href="#" class="text text-primary d-flex align-items-center mb-3">
                                                <svg class="svg-icon mr-2" width="15" height="20">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#dowland"></use>
                                                </svg>
                                                Скачать опросный лист
                                            </a>
                                            <div class="form-group pb-2">
                                                <input class="form-file form-file-lg" name="file[]" multiple="multiple" type="file" id="form-stem-2__lg-form-file" accept=".doc,.xls,.rtf,.pdf,.jpg,.png" data-size="10">
                                                <label for="form-stem-2__lg-form-file" class="btn btn-outline-primary w-100 flex-column align-items-center justify-content-center">
                                                    <span class="form-file__title">Прикрепите ваш заполненный опросный лист</span>
                                                    <span class="form-file__names"></span>
                                                    <small>PDF, XLS до 10 мб</small>
                                                </label>
                                            </div>
                                            <div class="form-group form-group-text">
                                                <input class="form-control" placeholder="placeholder" type="text" id="form-stem-2__name" name="name">
                                                <label for="form-stem-2__name">Ваше имя</label>
                                            </div>
                                            <div class="form-group form-group-text">
                                                <input class="form-control" placeholder="placeholder" type="text" id="form-stem-2__phone" data-inputmask="'mask': '+7 (999) 999 - 99 - 99'" name="phone" required>
                                                <label for="form-stem-2__phone">+7 (___) ___ - __ - __ <span>*</span>
                                                </label>
                                            </div>
                                            <div class="form-group form-group-text">
                                                <textarea class="form-control" name="comment" id="form-stem-2__textarea" placeholder="placeholder"></textarea>
                                                <label for="form-stem-2__textarea">Комментарий</label>
                                            </div>
                                            <a href="#" class="btn btn-primary w-100 btn-md mt-2">
                                        Получить цену / Узнать стоимость
                                    </a>
                                            <small class="text-agree mt-2">Нажимая на&nbsp;кнопку &laquo;Отправить&raquo;
                                        я&nbsp;даю согласие на&nbsp;<a href="#">обработку персональных данных</a></small>
                                        </div>
                                        <div class="tab-pane fade" id="form-stem-3" role="tabpanel" aria-labelledby="form-stem-tab-3">
                                            <h2 class="pb-2 mb-2 pb-lg-4 mb-lg-4 bb-1">Связаться со специалистом</h2>
                                            <p class="text">Заполните форму обратной связи и мы перезвоним вам в течении 15 минут</p>

                                            <div class="form-group form-group-text">
                                                <input class="form-control" placeholder="placeholder" type="text" id="forform-stem-3__name" name="name">
                                                <label for="forform-stem-3__name">Ваше имя</label>
                                            </div>
                                            <div class="form-group form-group-text">
                                                <input class="form-control" placeholder="placeholder" type="text" id="form-stem-3__phone" data-inputmask="'mask': '+7 (999) 999 - 99 - 99'" name="phone" required>
                                                <label for="form-stem-3__phone">+7 (___) ___ - __ - __ <span>*</span>
                                                </label>
                                            </div>
                                            <div class="form-group form-group-text">
                                                <textarea class="form-control" name="comment" id="form-stem-3__textarea" placeholder="placeholder"></textarea>
                                                <label for="form-stem-3__textarea">Ваш вопрос</label>
                                            </div>
                                            <a href="#" class="btn btn-primary w-100 btn-md mt-2">
                                        Отправить заявку
                                    </a>
                                            <small class="text-agree mt-2">Нажимая на&nbsp;кнопку &laquo;Отправить&raquo;
                                        я&nbsp;даю согласие на&nbsp;<a href="#">обработку персональных данных</a></small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <script type="text/x-template" id="cart-table-item">
                <tr class="cart-table__row">
                    <td class="cart-table-item">
                        <figure class="cart-table-item__img">
                            <span v-html="idx + 1"></span>
                            <img :src="itemdata.img">
                        </figure>
                        <div class="cart-table-item__caption">
                            <div class="cart-table-item__status">
                                <svg class="svg-icon mr-1" width="12" height="8" v-if="itemdata.status == 'В наличии'">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#check"></use>
                                </svg>
                                <svg class="svg-icon mr-1" width="12" height="12" v-if="itemdata.status == 'Под заказ'">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#time"></use>
                                </svg>
                                <span v-html="itemdata.status"></span>
                            </div>
                            <div class="text text-black font-weight-medium" v-html="itemdata.article"></div>
                            <div class="text text-info" v-html="itemdata.title"></div>
                            <ul class="cart-table-item__service">
                                <li v-for="(service, sid, sidx) in itemdata.services" v-if="service.active">
                                    <span class="cart-table-item__service-del" @click="delServices(service, sid)"></span>
                                    <span v-html="service.title"></span>
                                </li>
                            </ul>
                            <a href="#services-modal" data-toggle="modal" class="cart-table-item__btn" @click="setServices(id)">Добавить
                                услугу?</a>
                        </div>
                    </td>
                    <td class="cart-table-item__price" data-title="Цена">
                        <span v-html="numberWithSpaces(itemdata.price) + ' руб.'"></span>
                    </td>
                    <td class="cart-table-item__form">
                        <div class="form-group mb-0">
                            <span class="input-btn input-btn_minus" @click="handleCounter('down', $event)"></span>
                            <input class="form-control" :value="selectedCount"
                                   @keydown.enter.prevent="changeInput($event)" type="number">
                            <span class="input-btn input-btn_plus" @click="handleCounter('up', $event)"></span>
                        </div>
                    </td>
                    <td class="cart-table-item__summ" data-title="Сумма">
                        <span class="cart-table-item__price" v-html="numberWithSpaces(summ) + ' руб.'"></span>
                    </td>
                    <td class="cart-table-item__delete">
                        <div class="cart-table-item__del" @click="remFromCart($event)">
                            <svg class="svg-icon" width="15" height="19">
                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#delete"></use>
                            </svg>
                        </div>
                    </td>
                </tr>
            </script>


            <script>
                let {throttle, debounce} = window.throttleDebounce
                Vue.component('cart-table-item', {
                    data() {
                        return {
                            selectedCount: this.itemdata['amount'],
                        }
                    },
                    props: {
                        itemdata: Object,
                        id: String,
                        idx: Number,
                    },
                    computed: {
                        summ() {
                            return this.itemdata.price * this.selectedCount
                        }
                    },
                    created() {
            
                    },
                    methods: {
                        numberWithSpaces: function (x) {
                            return x.toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
                        },
                        setServices(id) {
                            this.$root.setActiveCart(id, this.itemdata.services);
                        },
                        delServices(service, id) {
                            this.$root.delActiveCart(id, service.price);
                        },
                        decrease() {
                            if (this.selectedCount > 0) {
                                this.selectedCount = this.selectedCount - 1;
                            }
                        },
                        increase() {
                            this.selectedCount = this.selectedCount + 1;
                        },
                        onChange(id) {
                            if (this.$store.state.mobileMode) {
                                $('.cat-table_footer').hide();
                                $('#cat-table_footer-' + id).css('display', 'flex');
                            }
                        },
                        handleCounter(dir, e) {
                            let vm = this
                            if (!this.counterBusy) {
                                this.counterActive = true
            
                                if (dir == "up") vm.increase()
                                else if (dir == "down") vm.decrease()
                                vm.freezeValue();
                            }
                        },
                        checkNumber(e) {
                            let val = parseFloat(e.target.value)
            
                            if (isNaN(val) || 0 > val) {
                                this.selectedCount = 0
                            } else {
                                this.selectedCount = val
                            }
                        },
                        changeInput(e) {
                            let vm = this
                            this.selectedCount = $(e.target).val() * 1;
                            vm.freezeValue();
                        },
                        freezeValue() {
                            this.updateCart(this)
                        },
            
                        updateCart: debounce(1000, (vm) => {
                            if (!isNaN(parseFloat(vm.selectedCount))) {
                                vm.$root.cartAction('UpdateCart', vm.itemdata, vm.id, vm.selectedCount);
                            }
                        }),
                        remFromCart(e) {
                            this.$root.cartAction('RemFromCart', this.itemdata, this.id);
                        },
                        toggleFav(id) {
                            this.$store.dispatch('hdr/pushFav', {
                                id: this.itemdata.id,
                            })
                        },
                        toggleComp(id) {
                            this.$store.dispatch('hdr/pushСomp', {
                                id: this.itemdata.id,
                            })
                        },
                    },
                    template: '#cart-table-item'
                })
            </script>
            <section class="section section-cart" id="cart">

                <div class="loading" v-if="isLoading">
                    <div class="loading-img text-info" role="status"></div>
                </div>
                <div class="container-fluid">
                    <div class=" pt-4 pb-2  bb-1 mb-4">
                        <div class="row justify-content-between align-items-center mb-sm-2">
                            <h1 class="col-auto mb-2">Корзина</h1>
                        </div>
                        <form class="row" v-if="cart_items_length > 0" @submit.prevent="submitForm($event)">
                            <div class="col-lg-9">
                                <table class="cart-table mb-4">
                                    <tr class="cart-table__row cart-table__row_header">
                                        <th>Товар</th>
                                        <th>Цена</th>
                                        <th>Количество</th>
                                        <th>Сумма</th>
                                        <th></th>
                                    </tr>
                                    <tr is="cart-table-item" :key="id" :itemdata="cItem" :id="id" :idx="idx" v-for="(cItem, id, idx) in cart_items"></tr>
                                </table>

                                <div class="modal modal-simple modal-services fade" id="services-modal" tabindex="-1" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h2 class="modal-title">Дополнительные услуги</h2>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <svg class="svg-icon" width="21" height="21">
                                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                                    </svg>
                                                </button>
                                            </div>
                                            <div class="modal-body pt-0">
                                                <div class="custom-control custom-checkbox" v-for="(service, id, idx) in services">
                                                    <input type="checkbox" class="custom-control-input" :checked="service.active" :id="'services-' + id" :data-uid="id" name="services" :data-price="service.price" :value="service.title">
                                                    <label class="custom-control-label" :for="'services-' + id">
                                                        <span v-html="service.title" class="custom-control-label__title"></span>
                                                        <span v-html="'+' + service.price + ' руб.'" class="custom-control-label__price"></span>
                                                    </label>
                                                </div>
                                                <div class="mt-2">
                                                    <a href="#" class="btn btn-primary w-100" @click="addService()">Добавить выбранные услуги</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="cart-form bb-1 mb-3">
                                    <h2 class="mb-3">Тип покупателя</h2>
                                    <label class="checkbox-error">Необходимо выбрать тип покупателя</label>
                                    <div class="cart-form-radio row">
                                        <div class="col-6 col-sm-3 col-lg-auto">
                                            <div class="cart-form-radio__item w-100">
                                                <input type="radio" value="individual" class="cart-form-radio__input" name="buyer_type" id="buyer_type-1" @change="checkboxType()">
                                                <label for="buyer_type-1">
                                                    <figure class="cart-form-radio__img">
                                                        <svg class="svg-icon" width="48" height="48">
                                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#waiter"></use>
                                                        </svg>
                                                    </figure>
                                                    <div>Физическое лицо</div>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-6 col-sm-3 col-lg-auto">
                                            <div class="cart-form-radio__item w-100">
                                                <input type="radio" value="entity" class="cart-form-radio__input" name="buyer_type" id="buyer_type-2" @change="checkboxType()">
                                                <label for="buyer_type-2">
                                                    <figure class="cart-form-radio__img">
                                                        <svg class="svg-icon" width="48" height="48">
                                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#suitcase"></use>
                                                        </svg>
                                                    </figure>
                                                    <div>Юридическое лицо</div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="cart-form bb-1 mb-3" v-if="type == 'entity'">
                                    <h2 class="mb-3">Организация</h2>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group form-group-text">
                                                <input class="form-control" :class="[filesLength == 0 ? 'required' : '']" type="text" placeholder="Наименование организации" id="organization" autocomplete="off" name="organization">
                                                <label for="organization">Наименование организации <span v-if="filesLength == 0">*</span>
                                                </label>
                                                <label class="label-error" v-if="filesLength == 0">Обязательное поле</label>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group form-group-text">
                                                <input class="form-control" :class="[filesLength == 0 ? 'required' : '']" type="number" placeholder="ИНН" id="inn" autocomplete="off" name="inn">
                                                <label for="inn">ИНН <span v-if="filesLength == 0">*</span>
                                                </label>

                                                <label class="label-error" v-if="filesLength == 0">Обязательное поле</label>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group form-group-text">
                                                <input class="form-control" :class="[filesLength == 0 ? 'required' : '']" type="number" placeholder="КПП" id="kpp" autocomplete="off" name="kpp">
                                                <label for="kpp">КПП <span v-if="filesLength == 0">*</span>
                                                </label>

                                                <label class="label-error" v-if="filesLength == 0">Обязательное поле</label>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group form-group-text">
                                                <input class="form-control" :class="[filesLength == 0 ? 'required' : '']" type="number" placeholder="ОГРН" id="ogrn" autocomplete="off" name="ogrn">
                                                <label for="ogrn">ОГРН <span v-if="filesLength == 0">*</span>
                                                </label>

                                                <label class="label-error" v-if="filesLength == 0">Обязательное поле</label>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <small class="text-info pb-30">
                                        Если вам неудобно заполнять данные поля в ручную, вы можете отправить данные о вайшей организации файлом
                                    </small>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <input class="form-file form-file-lg" name="file[]" multiple="multiple" type="file" id="main-form-file" accept=".doc,.xls,.rtf,.pdf,.jpg,.png" data-size="10" @change="changeOrganization($event)">
                                                <label for="main-form-file" class="btn btn-outline-primary w-100">
                                                    <span class="form-file__title">Прикрепите файл</span>
                                                    <span class="form-file__names"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="cart-form bb-1 mb-3">
                                    <h2 class="mb-3">Контактное лицо</h2>
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="form-group form-group-text">
                                                <input class="form-control" type="text" placeholder="ФИО" id="name" autocomplete="off" name="organization">
                                                <label for="name">ФИО</label>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group form-group-text">
                                                <input class="form-control required" type="text" data-inputmask="'mask': '+7 (999) 999 - 99 - 99'" placeholder="+7 (XXX) XXX_XX_XX" id="phone" autocomplete="off" name="phone">
                                                <label for="phone">+7 (XXX) XXX_XX_XX <span>*</span>
                                                </label>
                                                <label class="label-error">Обязательное поле</label>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group form-group-text">
                                                <input class="form-control required" type="email" placeholder="E-mail" id="email" autocomplete="off" name="email">
                                                <label for="email">E-mail <span>*</span>
                                                </label>
                                                <label class="label-error">Обязательное поле</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="cart-form bb-1 mb-3">
                                    <h2 class="mb-3">Доставка</h2>
                                    <label class="checkbox-error">Необходимо выбрать тип доставки</label>
                                    <div class="cart-form-radio row">
                                        <div class="col-auto col-sm-4">
                                            <div class="cart-form-radio__item">
                                                <input type="radio" value="terminal-TK" class="cart-form-radio__input" name="delivery" id="delivery-1" @change="checkboxDelivery()">
                                                <label for="delivery-1">
                                                    <figure class="cart-form-radio__img">
                                                        <svg class="svg-icon" width="48" height="48">
                                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#cinema"></use>
                                                        </svg>
                                                    </figure>
                                                    <div>Доставка до терминала ТК</div>
                                                    <small class="text-info mt-1">ПЭК, Деловые линии</small>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-auto col-sm-4">
                                            <div class="cart-form-radio__item">
                                                <input type="radio" value="object" class="cart-form-radio__input" name="delivery" id="delivery-2" @change="checkboxDelivery()">
                                                <label for="delivery-2">
                                                    <figure class="cart-form-radio__img">
                                                        <svg class="svg-icon" width="48" height="48">
                                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#building"></use>
                                                        </svg>
                                                    </figure>
                                                    <div>Доствака до объекта</div>
                                                    <small class="text-info mt-1">Бесплатно при заказе от 30 000 ₽</small>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-auto col-sm-4">
                                            <div class="cart-form-radio__item">
                                                <input type="radio" value="warehouse" class="cart-form-radio__input" name="delivery" id="delivery-3" @change="checkboxDelivery()">
                                                <label for="delivery-3">
                                                    <figure class="cart-form-radio__img">
                                                        <svg class="svg-icon" width="48" height="48">
                                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#warehouse2"></use>
                                                        </svg>
                                                    </figure>
                                                    <div>Самовывоз со склада</div>
                                                    <small class="text-info mt-1">Москва и МО</small>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12" v-if="delivery == 'object'">
                                            <div class="form-group">
                                                <input type="text" class="form-control required" name="address" placeholder="Ваш адрес (город, улица, дом, офис)">
                                            </div>
                                        </div>
                                        <div class="col-12" :class="[delivery == 'warehouse' ? 'd-block' : 'd-none']">
                                            <div id="cart-map" class="empty"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="cart-form bb-1 mb-3">
                                    <h2 class="mb-3">Оплата</h2>
                                    <label class="checkbox-error">Необходимо выбрать тип оплаты</label>
                                    <div class="cart-form-radio row">
                                        <div class="col-auto col-sm-4">
                                            <div class="cart-form-radio__item">
                                                <input type="radio" value="cashless" class="cart-form-radio__input" name="payment" id="payment-1" @change="checkboxPayment()">
                                                <label for="payment-1">
                                                    <figure class="cart-form-radio__img">
                                                        <svg class="svg-icon" width="48" height="48">
                                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#bill"></use>
                                                        </svg>
                                                    </figure>
                                                    <div>Безналичная оплата</div>
                                                    <small class="text-info mt-1">На счет ООО «Комплект Сервис»</small>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-auto col-sm-4">
                                            <div class="cart-form-radio__item">
                                                <input type="radio" value="card" class="cart-form-radio__input" name="payment" id="payment-2" @change="checkboxPayment()">
                                                <label for="payment-2">
                                                    <figure class="cart-form-radio__img">
                                                        <svg class="svg-icon" width="48" height="48">
                                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#credit-card"></use>
                                                        </svg>
                                                    </figure>
                                                    <div>Картой онлайн</div>
                                                    <small class="text-info mt-1">Олачивайте сразу при оформлении</small>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-auto col-sm-4" v-if="delivery == 'warehouse'">
                                            <div class="cart-form-radio__item">
                                                <input type="radio" value="warehouse" class="cart-form-radio__input" name="payment" id="payment-3" @change="checkboxPayment()">
                                                <label for="payment-3">
                                                    <figure class="cart-form-radio__img">
                                                        <svg class="svg-icon" width="48" height="48">
                                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#wallet2"></use>
                                                        </svg>
                                                    </figure>
                                                    <div>Наличными при самовывозе</div>
                                                    <small class="text-info mt-1">С наших складов в Москве и МО</small>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="cart-form">
                                    <h2 class="mb-3">Комментарий к заказу</h2>
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="form-group form-group-text">
                                                <textarea class="form-control" placeholder="Ваш комментарий" id="comment" autocomplete="off" name="comment"></textarea>
                                                <label for="comment">Ваш комментарий</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="cart-info">
                                    <h2 class="mb-3">Ваш заказ</h2>
                                    <dl>
                                        <dt>Позиций</dt>
                                        <dd v-html="cart_items_length + ' шт.'"></dd>
                                    </dl>
                                    <dl>
                                        <dt>Скидка</dt>
                                        <dd>0 ₽</dd>
                                    </dl>
                                    <dl v-if="all_price > 30000">
                                        <dt>Доставка</dt>
                                        <dd class="text-secondary">Бесплатно</dd>
                                    </dl>
                                    <dl>
                                        <dt>Сумма без НДС</dt>
                                        <dd v-html="numberWithSpaces(all_price) + ' руб.'"></dd>
                                    </dl>
                                    <dl class="cart-info__result">
                                        <dt>Итого</dt>
                                        <dd v-html="numberWithSpaces(all_price) + ' руб.'"></dd>
                                    </dl>
                                    <small class="text-info mb-2">
                                Нажимая на кнопку «Оформить заказ»
                                я даю согласие на <a href="#">обработку персональных данных</a>
                            </small>
                                    <button type="submit" class="btn btn-primary w-100 mb-2">Оформить заказ</button>
                                    <div class="text-center">
                                        <a href="#" class="cart-info__reset text-dashed" @click.prevent="cartAction('ClearCart')">Очистить корзину</a>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div v-if="cart_items_length == 0">
                            <h4 class="mb-5">Ваша корзина пуста</h4>
                        </div>
                    </div>
                </div>
            </section>

            <script type="text/x-template" id="cat-slider">
                <div class="swiper-slide cat-slide" :data-uid="id">
                    <a :href="itemdata.link">
                        <figure class="cat-slide__img">
                            <img :src="itemdata.img">
                        </figure>
                    </a>
                    <a :href="itemdata.link" class="cat-slide__title" v-html="itemdata.title"></a>
                    <div class="cat-slide__footer">
                        <div>
                            <div class="cat-slide__price" v-if="minPrice != 0">от <span v-html="numberWithSpaces(minPrice)"></span> руб.</div>
                            <div class="cat-slide__price" v-if="minPrice == 0">Цена по запросу</div>
            
                            <div class="cat-slide__vars" v-on:click="showModal()">Вариантов (<span v-html="varsLength"></span>)</div>
                        </div>
                        <a :class="['btn btn-primary cat-slide__add', isInCart ? 'btn-secondary' : 'btn-primary']"   v-on:click="showModal()">
                            <svg class="svg-icon" width="23" height="20">
                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#cart"></use>
                            </svg>
                        </a>
                    </div>
                </div>
            </script>

            <script>
                Vue.component('cat-slider', {
                    data: function () {
                        return {
                            count: 0
                        }
                    },
                    props: {
                        itemdata: Object,
                        id: String,
                    },
                    computed: {
                        isInCart() {
                            let inCart = false
                            let vm = this
                            $.each(this.itemdata.vars, function (index, value) {
                                if (vm.$store.state.hdr.cart_items.indexOf(value.id) >= 0){
                                    inCart = true;
                                    return inCart;
                                }
                            })
                            return inCart;
                        },
                        varsLength() {
                            return this.itemdata.vars.length;
                        },
                        minPrice() {
                            let min = this.itemdata.vars[0].new_price;
                            $.each(this.itemdata.vars, function (key, value) {
                                if (min == 0) {
                                    min = value.new_price
                                } else if (min > value.new_price && value.new_price != 0) {
                                    min = value.new_price
                                }
                            });
                            return min
                        },
                    },
                    methods: {
                        numberWithSpaces: function (x) {
                            return x.toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
                        },
                        click: function () {
                            console.log('clocloc lcolc lcolc')
                        },
                        onClick: function () {
                            console.log('clocloc onClick onClick onClick')
                        },
                        showModal: function (array) {
                            console.log('showModal')
                            this.$store.dispatch('hdr/changeItem', {
                                itemdata: this.itemdata,
                                id: this.id,
                            })
                            $('#cat-modal').modal('show');
            
                        }
                    },
                    created(){
            
                    },
                    template: '#cat-slider'
                })
            </script>
            <section class="section section-hits pb-8">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 mb-2 ">
                            <div class="row justify-content-between ">
                                <h2 class="mb-2 col-auto">Сопутствующие товары</h2>
                                <a href="#" class="col-auto link mb-2">Смотреть все</a>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="cat-container">
                                <div class="swiper-container cat-slider" id="hits" @click="onClick($event)">
                                    <div class="swiper-wrapper">
                                        <component is="cat-slider" v-for="(cItem, id, idx) in hits_list" :id="id" :key="cItem.idx" :itemdata="cItem"></component>
                                    </div>

                                </div>
                                <div class="swiper-button-next cat-slider-next d-none d-lg-flex">
                                    <svg class="svg-icon" width="14" height="13">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#slider-arrow"></use>
                                    </svg>
                                </div>
                                <div class="swiper-button-prev cat-slider-prev d-none d-lg-flex">
                                    <svg class="svg-icon" width="14" height="13">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#slider-arrow"></use>
                                    </svg>
                                </div>
                            </div>

                            <script>
                                let hits_data = {
                                    items: {
                                        "id01": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-1.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 15456,
                                                    "new_price": 12996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 10155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                        "id02": {
                                            "title": 'Задвижка с обрезиненным клином ',
                                            "img": 'static/img/content/catalog/cat-2.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 12456,
                                                    "new_price": 10996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 11155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                        "id03": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-3.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 12456,
                                                    "new_price": 6996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 10546,
                                                    "new_price": 7155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                        "id04": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-4.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 12456,
                                                    "new_price": 12996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 13155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                        "id05": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-5.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 12456,
                                                    "new_price": 12996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 13155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                        "id06": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-6.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 12456,
                                                    "new_price": 12996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 13155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        }, "id07": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-3.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 12456,
                                                    "new_price": 12996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 13155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                        "id08": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-4.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 12456,
                                                    "new_price": 12996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 13155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                        "id09": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-5.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 11456,
                                                    "new_price": 12996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 13155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                        "id10": {
                                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                                            "img": 'static/img/content/catalog/cat-6.png',
                                            "vars": [
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                                                    "id": "1234",
                                                    "status": "В наличии",
                                                    "date": "1-3 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "PN10",
                                                    "length": "PN10",
                                                    "height": "PN10",
                                                    "old_price": 12456,
                                                    "new_price": 12996,
                                                    "sale": "-10%",
                                                    "amount": 2,
                                                },
                                                {
                                                    "title": "L(SP)-011-01-0050-PN10",
                                                    "id": "5678",
                                                    "status": "В наличии",
                                                    "date": "1-4 рабочих дня",
                                                    "pressure": "PN10",
                                                    "diameter": "DN50",
                                                    "length": "30",
                                                    "height": "250",
                                                    "old_price": 12546,
                                                    "new_price": 13155,
                                                    "sale": "-10%",
                                                    "amount": 3,
                                                }
                                            ]
                                        },
                                    }
                            
                                }
                            </script>
                            <script>
                                if (hits_data) {
                                    let hits_slider = new Vue({
                                        el: '#hits',
                                        delimiters: ['[[', ']]'],
                                        store: rushwork_store,
                                        data: {
                                            items: hits_data.items,
                                        },
                                        computed: {
                                            hits_list() {
                                                return this.items
                                            }
                                        },
                                        created() {
                                        },
                                        methods: {
                                            onClick(e) {
                                                if ($(e.target).parents('.swiper-slide-duplicate').length > 0) {
                                                    let id = $(e.target).parents('.swiper-slide-duplicate').attr('data-uid');
                                                    let itemdata = this.items[id];
                                                    this.$store.dispatch('hdr/changeItem', {
                                                        itemdata: itemdata,
                                                        id: id,
                                                    })
                                                    $('#cat-modal').modal('show');
                                                }
                                            }
                                        }
                                    });
                                }
                            </script>
                        </div>
                    </div>
                </div>
            </section>

            <script>
                let cart_data = {
                    cart_items: {
                        "id01": {
                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                            "img": 'static/img/content/catalog/cat-1.png',
                            "article": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                            "id": "1234",
                            "status": "В наличии",
                            "date": "1-3 рабочих дня",
                            "price": 2996,
                            "amount": 2,
                            "services": {
                                'serv1': {
                                    "title": 'Сборка',
                                    "price": '2000',
                                    "active": false
                                },
                                'serv2': {
                                    "title": 'Настройка',
                                    "price": '2000',
                                    "active": false
                                },
                                'serv3': {
                                    "title": 'Установка',
                                    "price": '2000',
                                    "active": false
                                },
                                'serv4': {
                                    "title": 'Выезд специалиста',
                                    "price": '2000',
                                    "active": false
                                },
                            },
                            "activeService": [],
                            "dop": 0,
                        },
                        /*"id02": {
                            "title": 'Задвижка с обрезиненным клином ',
                            "img": 'static/img/content/catalog/cat-2.png',
                            "article": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                            "id": "3546",
                            "status": "Под заказ",
                            "date": "1-3 рабочих дня",
                            "price": 12456,
                            "amount": 50,
                            "services": [
            
                                {
                                    "title": 'Установка',
                                    "price": '2000',
                                    "active": false
                                },
                                {
                                    "title": 'Выезд специалиста',
                                    "price": '2000',
                                    "active": false
                                },
                            ],
                            "dop": 0,
                        },
                        "id03": {
                            "title": 'Задвижка с обрезиненным клином чугунная RUSHWORK 113 PN16 с ISO-фланцем уплотнение NBR',
                            "img": 'static/img/content/catalog/cat-3.png',
                            "article": "L(SP)-011-01-0050-PN10-SsP-HW(N)-E",
                            "id": "4578",
                            "status": "В наличии",
                            "date": "1-3 рабочих дня",
                            "price": 12456,
                            "amount": 9,
                            "services": [
                                {
                                    "title": 'Сборка',
                                    "price": '2000',
                                    "active": false
                                },
                            ],
                            "dop": 0,
                        },*/
                    },
            
                }
            </script>
            <script>
                const searchAddressData = {
                    frases: {
                        notFound: "К сожалению, подходящих вариантов не&nbsp;найдено, нажмите кнопку поиска для&nbsp;поиска по&nbsp;всему каталогу",
                        searchSelect: "Введите название товара, категории или бренда",
                    }
                };
            </script>
            <script>
                let myPlacemark, cartMap, myGeoObjects;
                let cart = new Vue({
                        el: '#cart',
                        delimiters: ['[[', ']]'],
                        store: rushwork_store,
                        data: {
                            services: [],
                            type: '',
                            delivery: '',
                            payment: '',
                            isLoading: true,
                            fileStore : [],
                            address: '',
                            geoaddress: '',
                            filesLength: 0,
                            frases: searchAddressData.frases,
                            place: '',
                            placeQuery: '',
                            searchOptions_server: [],
                            activeId: '',
                            placeSectionConfigs: {
                                map: {
                                    limit: 10,
                                    onSelected: (s) => {
                                        this.place = s.item.value;
                                        cart.addPlace(s.item.value)
                                    }
                                },
            
                            },
                            cart_items: cart_data.cart_items
                        },
                        computed: {
                            placeInputProps() {
                                return {
                                    id: 'form-autocomplete--place',
                                    class: 'form-control',
                                    placeholder: 'Ваш адрес (город, улица, дом, офис)',
                                }
                            },
                            cart_items_length() {
                                return Object.keys(this.cart_items).length;
                            },
                            all_price() {
                                let summ = 0;
                                let array = $.map(Object.values(this.cart_items), function (value, index) {
                                    summ += value.price * value.amount + value.dop;
                                });
                                return summ;
                            },
                            placeOptions() {
            
                                let map = []
                                let final = []
                                this.searchOptions_server.forEach(({txt, value, type}) => {
                                    if (type == 'map') map.push({txt, value, type,})
                                });
            
                                if (map.length > 0) {
                                    final.push({
                                        name: 'map',
                                        data: map
                                    })
                                } else {
                                    final = [{
                                        name: 'default',
                                        data: [{
                                            txt: this.frases.notFound
                                        }]
                                    }]
                                }
                                return final
                            },
                        },
                        watch: {
                            activeServices(newval, oldval) {
                                this.isInService()
                            },
                        },
                        methods: {
                            getSuggestionValue(suggestion) {
                                return suggestion.item.txt;
                            },
                            changeOrganization(e) {
                               console.log(e.target.files.length)
                                this.filesLength = e.target.files.length
                            },
                            addPlace(value) {
                                let arr = value.split(' '), result = []
                                result[0] = arr[1] * 1;
                                result[1] = arr[0] * 1;
                                myGeoObjects.removeAll();
                                myGeoObjects.add(new ymaps.Placemark(result));
                                cartMap.geoObjects.add(myGeoObjects);
                                cartMap.setCenter(result);
                            },
                            btnDisabled() {
                                return !(this.placeQuery.length > 2 || this.place.length)
                            },
                            clearField(name) {
                                vm.placeOptions = ''
                            },
                            fetchplace(query) {
                                let vm = this
                                if (!query || query.length < 2) return;
                                $.ajax({
                                    url: 'http://geocode-maps.yandex.ru/1.x/?apikey=818006c9-50f6-486c-926e-77ae8a141917&geocode=' + query + '&format=json&results=10',
                                    dataType: "json",
                                    success: function (data) {
                                        vm.searchOptions_server = []
                                        let arr = {};
                                        arr.code = 200
                                        arr.data = []
                                        $.each(data.response.GeoObjectCollection.featureMember, function (index, value) {
                                            if (typeof value.GeoObject != 'undefined') {
                                                var coords = value.GeoObject.Point.pos;
                                                var title = value.GeoObject.metaDataProperty.GeocoderMetaData.text;
                                                arr.data.push({
                                                    txt: value.GeoObject.metaDataProperty.GeocoderMetaData.text,
                                                    value: value.GeoObject.Point.pos,
                                                    type: 'map'
                                                })
                                            }
                                        })
                                        vm.searchOptions_server = arr.data
                                    }
                                });
                            },
            
                            changeTab: function (e, title) {
                                e.preventDefault();
                                this.tab = title;
                            },
            
                            initMap() {
            
                            },
                            checkboxType() {
                                this.type = $('input[name="buyer_type"]:checked').val()
                                $('input[name="buyer_type"]:first').parents('.cart-form').find('.checkbox-error').removeClass('error')
                            },
                            checkboxDelivery() {
                                this.delivery = $('input[name="delivery"]:checked').val()
                                $('input[name="delivery"]:first').parents('.cart-form').find('.checkbox-error').removeClass('error')
                                if ((this.delivery != 'warehouse') && (this.payment == 'warehouse')){
                                    $('input[name="payment"]').prop('checked', false);
                                }
                            },
                            checkboxPayment() {
                                this.payment = $('input[name="payment"]:checked').val()
                                $('input[name="payment"]:first').parents('.cart-form').find('.checkbox-error').removeClass('error')
                            },
                            setActiveCart(id, service) {
                                Vue.set(this, 'activeId', id);
                                Vue.set(this, 'services', service);
                            },
                            delActiveCart(id, price) {
                                Vue.set(this.cart_items[this.activeId].services[id], 'active', false);
                                Vue.set(this.cart_items[this.activeId], 'dop', this.cart_items[this.activeId].dop - price * 1);
                            },
                            submitForm(e) {
                                let vm = this
                               // let data = $(e.target).serializeArray();
                                var data = new FormData(e.target);
                                $.each( vm.fileStore, function( key, value ){
                                    data.append( key, value );
                                });
                                let error = 0;
                                $(e.target).find('input.required').each(function () {
                                    if (!$(this).val()) {
                                        error = 1
                                        $(this).addClass('error')
                                    } else {
                                        $(this).addClass('correct')
                                    }
                                })
                                if (vm.type == '') {
                                    error = 1;
                                    $('input[name="buyer_type"]:first').parents('.cart-form').find('.checkbox-error').addClass('error')
                                }
                                if (vm.delivery == '') {
                                    error = 1;
                                    $('input[name="delivery"]:first').parents('.cart-form').find('.checkbox-error').addClass('error')
                                }
                                if (vm.payment == '') {
                                    error = 1;
                                    $('input[name="payment"]:first').parents('.cart-form').find('.checkbox-error').addClass('error')
                                }
                                if (error == 0) {
                                    data.append('name', 'action');
                                    data.append('value', 'createOrder');
                                    $.ajax({
                                        type: "POST",
                                        url: "/bitrix/templates/Energo/inc/Ajax/ajax.php",
                                        dataType : "text",
                                        cache: false,
                                        contentType: false,
                                        processData: false,
                                        data: data,
                                    }).done(function(responsedata) {
                                        let data = JSON.parse(responsedata);
                                        if (data.status && data.id != 0) {
                                            window.location.href = '/cart/success/?ORDER_ID=' + data.id
                                        } else {
                                            $('#answer-status').addClass('error')
                                            $('#answer-title').html('Возникла ошибка связи с сервером')
                                            $('#answer-text').html('Повторите попытку позже!')
                                            $('#answer-modal').modal('show');
                                            return false;
                                        }
                                    })
                                } else {
                                    let pos = $('.error:first').offset().top - $('header').outerHeight()
                                    $('html, body').animate({scrollTop: pos}, 500);
                                    return false;
                                }
            
            
                            },
                            cartAction(act, itemdata, id, amount) {
                                let data = {"action": act}
                                if (typeof itemdata == 'object') data.id = itemdata['id'];
                                if (amount !== undefined) data.amount = amount
                                if (act == 'ClearCart') data.clear = true
            
                                let vm = this;
                                vm.isLoading = true
                                $.ajax({
                                    url: this.$store.state.ajaxURL,
                                    type: "POST",
                                    data: data
                                }).done(function (resp) {
                                    if (resp.success) {
                                        vm.$store.dispatch('hdr/changeLength', {
                                            length: resp.cart_length,
                                        })
                                        vm.$store.dispatch('hdr/changeCart', {
                                            cart_items: resp.cart_items,
                                        })
                                        if (act == 'RemFromCart') {
                                            Vue.delete(vm.cart_items, id);
                                        } else if (act == 'UpdateCart') {
                                            let selected = vm.cart_items[id] ? vm.cart_items[id].amount : 0;
                                            if (amount === 0 && !!vm.cart_items[id]) {
                                                Vue.delete(vm.cart_items, id);
                                            } else if (selected !== amount) {
                                                if (vm.cart_items[id]) {
                                                    Vue.set(vm.cart_items[id], 'amount', amount);
                                                }
                                            }
                                        } else if (act == 'ClearCart') {
                                            Vue.set(vm, 'cart_items', {});
                                        }
                                        vm.isLoading = false
                                    } else {
            
                                        vm.isLoading = false
                                        $('#answer-status').addClass('error')
                                        $('#answer-title').html('Возникла ошибка связи с сервером')
                                        $('#answer-text').html('Повторите попытку позже!')
                                        $('#answer-modal').modal('show');
                                    }
                                });
                            },
                            numberWithSpaces: function (x) {
                                return x.toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
                            },
                            resetCart: function (e) {
                                e.preventDefault();
                                //this.$root.resetCart()
                            },
                            isInService: function (title) {
                                if (typeof this.activeServices != 'undefined') {
                                    return this.activeServices.find(item => item.title == title) && true || false
                                } else {
                                    return false
                                }
            
                            },
                            addService: function (title) {
                                let vm = this;
                                let price = 0, activeId = this.activeId;
                                for (var key in vm.cart_items[activeId].services) {
                                    Vue.set(vm.cart_items[activeId].services[key], 'active', false);
                                }
                                let arr = []
                                $('input:checkbox:checked').each(function () {
                                    let id = $(this).attr('data-uid')
                                    Vue.set(vm.cart_items[activeId].services[id], 'active', true);
                                    price += $(this).attr('data-price') * 1
                                    arr.push(vm.cart_items[activeId].services[id].title)
                                });
                                Vue.set(vm.cart_items[activeId], 'dop', price);
                                $('#services-modal').modal('hide')
                                $.ajax({
                                    url: this.$store.state.ajaxURL,
                                    type: "POST",
                                    data: {
                                        id: activeId,
                                        services: JSON.stringify(arr),
                                    }
                                }).done(function (resp) {
                                    if (resp.success) {
            
                                    } else {
            
                                        $('#answer-status').addClass('error')
                                        $('#answer-title').html('Возникла ошибка связи с сервером')
                                        $('#answer-text').html('Повторите попытку позже!')
                                        $('#answer-modal').modal('show');
                                    }
                                });
                            },
                        },
                        mounted() {
                            let vm = this;
            
                            vm.isLoading = false
                            $(document).on('keyup', "input", function () {
                                $(this).removeClass('error')
                            });
                            $(document).on('change', 'input[type=file]', function (e) {
                                vm.fileStore= [];
                                let maxSize = $(this).attr('data-size') * 1024 * 1024, thisSize = 0;
                                $.each(this.files, function (index, value) {
                                    if (thisSize < value.size) {
                                        thisSize = value.size
                                    }
                                })
                                if (thisSize < maxSize) {
                                    vm.fileStore.push.apply(vm.fileStore, this.files);
                                }
                            });
            
                            if ($('#cart-map').hasClass('empty')) {
                                $('#cart-map').removeClass('empty')
            
                                ymaps.ready(function () {
                                    cartMap = new ymaps.Map('cart-map', {
                                        center: [59.938955, 30.315644],
                                        zoom: 10
                                    }, {
                                        searchControlProvider: 'yandex#search'
                                    })
            
            
                                    myPlacemark = new ymaps.Placemark([59.938955, 30.315644], {
                                        balloonContent: '<span class="font-weight-bold">Адрес склада самовывоза:</span><br/>Санкт-петербург, улица Ленина, дом 1111',
                                    }, {
                                        iconLayout: 'default#image',
                                        iconImageHref: 'static/img/general/map-center.png',
                                        iconImageSize: [32, 40],
                                        iconImageOffset: [-16, -20],
                                        balloonCloseButton: false,
                                        hideIconOnBalloonOpen: false,
                                        balloonOffset: [0, -20]
                                    })
                                    cartMap.geoObjects.add(myPlacemark)
                                    myPlacemark.balloon.open();
            
                                })
                            }
                        },
                        updated() {
                            let vm = this;
            
                        },
                        created() {
                            let vm = this;
            
                        }
                    })
                ;
            </script>


            <script>
            </script>
            <div class="page__buffer"></div>

        </div>

        <footer class="page__footer">
            <div class="container-fluid">
                <div class="footer">
                    <div class="row">
                        <div class="col-lg-3 footer__header">
                            <a href="/" class="footer-logo">
                                <img src="static/img/general/logo.png" width="144" class="img-fluid">
                            </a>
                            <p class="footer-copyright">2007—2021 © Rushwork</p>
                            <p class="footer-development mt-auto mb-0 d-none d-lg-block">
                                <svg class="svg-icon" width="18" height="18">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#devlopment"></use>
                                </svg>
                                Development by Active
                            </p>
                        </div>
                        <div class="col-lg-3 col-sm-6 d-flex flex-column">
                            <ul class="footer-nav mb-3 m-0">
                                <li class="footer-nav__item"><a href="#" class="footer-nav__link">Услуги</a>
                                </li>
                                <li class="footer-nav__item"><a href="#" class="footer-nav__link">О компании</a>
                                </li>
                                <li class="footer-nav__item"><a href="#" class="footer-nav__link">Акции</a>
                                </li>
                                <li class="footer-nav__item"><a href="#" class="footer-nav__link">Доставка и оплата</a>
                                </li>
                                <li class="footer-nav__item"><a href="#" class="footer-nav__link">Блог</a>
                                </li>
                                <li class="footer-nav__item"><a href="#" class="footer-nav__link">Контакты</a>
                                </li>
                            </ul>
                            <a href="#" class="footer-link mb-1 mt-auto d-block">Пользовательское соглашение</a>
                            <a href="#" class="footer-link d-block">Политика конфидециальности</a>
                        </div>
                        <div class="footer-menu col-lg-3 col-sm-6">
                            <div class="mcats">
                                <a href="#" class="mcats__item">
                                    <figure class="mcats__img">
                                        <svg class="svg-icon" width="44" height="35">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#drives"></use>
                                        </svg>
                                    </figure>
                                    Приводы
                                </a>
                                <a href="#" class="mcats__item">
                                    <figure class="mcats__img">
                                        <svg class="svg-icon" width="33" height="38">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#valves"></use>
                                        </svg>
                                    </figure>
                                    Задвижки
                                </a>
                                <a href="#" class="mcats__item">
                                    <figure class="mcats__img">
                                        <svg class="svg-icon" width="36" height="38">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#automation"></use>
                                        </svg>
                                    </figure>
                                    Оборудование для автоматизации
                                </a>
                                <a href="#" class="mcats__item">
                                    <figure class="mcats__img">
                                        <svg class="svg-icon" width="39" height="34">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#brands"></use>
                                        </svg>
                                    </figure>
                                    Бренды
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-3 footer__contacts pt-3 pt-sm-0">
                            <div>
                                <a href="tel:+74952928793" class="footer-phone">+7 (495) 292-87-93</a>
                                <p class="text">пн-пт с 9:00 до 18:00</p>
                            </div>
                            <div class="mb-2 mb-sm-0">
                                <p class="text my-auto">г. Москва, станция метро "Дубровка" ул. Шарикоподшипниковская, д. 22</p>
                                <a href="mailto:zakaz@rashwork.con" class="footer-email text my-auto">zakaz@rashwork.con</a>
                            </div>
                            <div class="mb-0 mt-auto footer__contacts_btns">
                                <a href="#bell-modal" data-toggle="modal" class="btn btn-primary w-100 py-1 text-center mb-1 mb-sm-0 mb-lg-1">
                            Заказать звонок
                        </a>
                                <a href="#config-modal" data-toggle="modal" class="btn btn-secondary w-100 py-1 text-center">Отправить
                            спецификацию</a>
                            </div>
                        </div>
                        <div class="col-12 footer__dev d-lg-none text-center text-sm-left">
                            <p class="footer-development mt-auto mb-0">
                                <svg class="svg-icon" width="18" height="18">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#devlopment"></use>
                                </svg>
                                Development by Active
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="btn-up">
                <svg class="svg-icon" width="40" height="40">
                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#up"></use>
                </svg>
            </div>

            <div class="modal fade cat-modal cat-modal_catalog" id="cat-modal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="cat-modal">
                            <div class="modal-header">
                                <figure class="cat-modal__img" v-if="!$store.state.mobileMode" v-bind:style="{ backgroundImage: 'url(' + item_img + ')' }"></figure>
                                <h2 class="cat-modal__main">

                            <a href="item['link']" v-html="items_length != 0  ? item['title'] : ''"></a>

                        </h2>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <svg class="svg-icon" width="21" height="21">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                    </svg>
                                </button>
                            </div>

                            <div class="modal-body" :style="{maxHeight : maxHeightBody}">
                                <div class="cat-modal-table" id="cat-modal-table">
                                    <div id="circle"></div>
                                    <div class="cat-table">
                                        <div v-if="!$store.state.mobileMode" class="cat-table__row cat-table__header">
                                            <div class="cat-table__code">Артикул</div>
                                            <div v-for="(param, id) in params" v-html="param.title"></div>
                                            <div class="cat-table__last"></div>
                                        </div>
                                        <div is="cat-modal-item" :key="id" :itemdata="cItem" :id="cItem.id" v-for="(cItem, id) in vars">
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                $(function () {
                    const {throttle, debounce} = window.throttleDebounce
                    if (hdr_data) {
                        let cat_modal = new Vue({
                            el: '#cat-modal',
                            delimiters: ['[[', ']]'],
                            store: rushwork_store,
                            data: {
                                maxHeightBody: ''
                            },
                            computed: {
                                ...Vuex.mapState('hdr', {
                                    item: state => state.item,
                                }),
            
                                items_length() {
                                    return typeof (this.item) != 'undefined' ? 1 : 0
                                },
                                item_img() {
                                    return typeof (this.item) != 'undefined' ? this.item['img'] : ''
                                },
                                vars() {
                                    return typeof (this.item) != 'undefined' ? this.item['vars'] : []
                                },
                                params() {
                                    return typeof (this.item) != 'undefined' ? this.item['params'] : []
                                },
                                /*maxHeightBody() {
                                    console.log('maxHeightBody',$(window).height(), $('#cat-modal').find('.modal-header').outerHeight())
                                    return 0.9 * $(window).height() - $('#cat-modal').find('.modal-header').outerHeight()
                                },*/
                            },
                            methods: {},
                            mounted() {
            
            
                            },
                            created() {
            
                            },
                            updated() {
                                let vm = this
                                $('.cat-modal_catalog').on('shown.bs.modal', function () {
                                    console.log('show.bs.modal')
                                    vm.maxHeightBody = 0.9 * $(window).height() - $('#cat-modal').find('.modal-header').outerHeight() + 'px';
                                    if ($('#cat-modal-table').length > 0) {
                                        let width = 300;
                                        $('#cat-modal-table').find('.cat-table__header div').each(function () {
                                            width += $(this).width()
                                        })
                                        if ($('#cat-modal-table').width() <= width) {
                                            $('#cat-modal-table').css('cursor', 'none')
                                            let speed = 1;
            
                                            let scroll = document.querySelector('#cat-modal-table');
            
                                            let left = 0;
                                            let drag = false;
                                            let coorX = 0;
            
                                            scroll.addEventListener('mousedown', function (e) {
                                                drag = true;
                                                coorX = e.pageX + this.offsetLeft;
                                            });
                                            document.addEventListener('mouseup', function () {
                                                drag = false;
                                                left = scroll.scrollLeft;
                                            });
                                            $("#cat-modal-table").mouseover(function (e) {
                                                $('#circle').css('display', 'block')
                                            }).mouseout(function (e) {
                                                $('#circle').css('display', 'none')
                                            });
                                            const circle = document.getElementById('circle');
                                            const circleStyle = circle.style;
                                            scroll.addEventListener('mousemove', function (e) {
                                                var div = $(".cat-table__last");
                                                var link = $(".cat-table__title");
                                                if (!div.is(e.target) && div.has(e.target).length === 0 && !link.is(e.target) && link.has(e.target).length === 0) {
                                                    window.requestAnimationFrame(() => {
                                                        circleStyle.top = `${e.clientY - circle.offsetHeight / 2}px`;
                                                        circleStyle.left = `${e.clientX - circle.offsetWidth / 2}px`;
                                                    });
                                                    if (drag) {
                                                        let pos = left - (e.pageX - this.offsetLeft - coorX) * speed;
                                                        $(".cat-table").scrollLeft(pos);
                                                    }
                                                    $('#cat-modal-table').css('cursor', 'none')
                                                } else {
                                                    $('#circle').css('display', 'none')
                                                    $('#cat-modal-table').css('cursor', 'auto')
                                                }
            
                                            });
                                        } else {
                                            let scroll = document.querySelector('#cat-modal-table');
                                            $('#circle').css('display', 'none');
                                            $("#cat-modal-table").mouseover(function (e) {
                                                $('#circle').css('display', 'none')
                                            })
                                            $('#cat-modal-table').css('cursor', 'auto')
                                            scroll.addEventListener('mousemove', function (e) {
                                                $('#cat-modal-table').css('cursor', 'auto')
                                            });
            
                                        }
                                    }
                                });
            
                            }
                        });
                    }
                });
            </script>

            <div class="modal fade cat-modal" id="cat-modal_delivery" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="cat-modal">
                            <div class="modal-header">
                                <figure class="cat-modal__img" v-if="!$store.state.mobileMode" v-bind:style="{ backgroundImage: 'url(' + item_img + ')' }"></figure>
                                <h2 class="cat-modal__main"><a href="item['link']"

                                                       v-html="items_length != 0  ? item['title'] : ''"></a></h2>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <svg class="svg-icon" width="21" height="21">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                    </svg>
                                </button>
                            </div>

                            <div class="modal-body">
                                <div class="modal-delivery__header">
                                    <h3>Доставка в пункт самомвывоза</h3>
                                    <p class="modal-delivery__date">25 июля</p>
                                </div>
                                <div class="modal-delivery__header pt-0">
                                    <p>Отгрузка и доставка осуществляются с 8:00 до 18.00. Заявка на доставку груза на следующий рабочий день принимается до 12:00 дня. Упаковка уже включена в стоимость товара.</p>
                                    <p><b>Бесплатная доставка для Москвы и регионов</b>:
                                    </p>
                                    <ol>
                                        <li>ежедневно до отгрузочного терминала ТК в г. Москве и г. Одинцово любых грузов (Деловые линии, ПЭК, Байкал Сервис) ;
                                        </li>
                                        <li>до адреса по Москве или МО (до 10 км от МКАД) при заказе от 30 т.р .</li>
                                    </ol>
                                    Отгрузки на прочие транспортные компании осуществляются по договоренности с менеджером и с бóльшим интервалом времени.
                                    <p></p>
                                    <p><b>Региональная доставка:</b>Бесплатно до ТК г. Москве и г. Одинцово, условия и стоимость доставки до терминалов ТК в других городах уточняйте у менеджера.</p>
                                    <p><b>Самовывоз:</b>
                                    </p>
                                    <p>Самовывоз, осуществляется с 8 до 18.00 по предварительной договоренности с менеджером.
                                        <br>Адрес склада: г. Одинцово, Московская обл., ул. Внуковская, 9, ворота 32
                                        <br>
                                        <br>
                                        <b>Важно:</b> Ваш представитель должен иметь надлежащую Доверенность или печать организации при получении груза.
                                        <br>Ниже представлен список ТК Деловые Линии и адрес склада самовывоза для вашего удобства. Мы также доставим груз в любой ТК ПЭК, Байкал Сервис. Адреса уточняйте на сайте или у менеджера.
                                    </p>
                                </div>
                                <div class="d-lg-none modal-delivery__tabs">
                                    <h3>Пункты самомвывоза</h3>
                                    <div class="modal-delivery__btns">
                                        <div class="col-6">
                                            <a class="btn btn-outline-light text-left justify-content-start active w-100 h-100" @click.prevent="showMap($event)">Карта</a>
                                        </div>
                                        <div class="col-6">
                                            <a class="btn btn-outline-light text-left justify-content-start w-100 h-100" @click.prevent="showList($event)">Список адресов</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-delivery__body">
                                    <div class="modal-delivery__body-container">
                                        <div class="modal-delivery__list">
                                            <h2 class="mb-3 d-none d-lg-block">Пункты самовывоза</h2>
                                            <input type="text" placeholder="Введите адрес" class="form-control" v-model="search" @keydown.enter.prevent="searchDelivery()">
                                            <div class="modal-delivery__list__item" v-for="(address, id) in delivery">
                                                <svg class="svg-icon" width="12" height="18">
                                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#map"></use>
                                                </svg>
                                                <div v-html="address.title"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-delivery__map" id="modal-delivery__map"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                let delivery_data = {
                    addresses: [
                        {
                            title: 'Санкт-Петербург, ул Типанова, д.27/39, лит. А',
                            coords: ["59.853812", "30.349708"],
                        },
                        {
                            title: 'Санкт-Петербург, ул Типанова, д.27/39, лит. А',
                            coords: [60.00, 30.349708],
                        },
                        {
                            title: 'Санкт-Петербург, ул Типанова, д.27/39, лит. А',
                            coords: [59.853812, 31],
                        },
                        {
                            title: 'Санкт-Петербург, ул Типанова, д.27/39, лит. А',
                            coords: [59.0, 31.349708],
                        },
                        {
                            title: 'Санкт-Петербург, ул Типанова, д.27/39, лит. А',
                            coords: [59.853812, 32.349708],
                        },
                        {
                            title: 'Санкт-Петербург, ул Типанова, д.27/39, лит. А',
                            coords: [60.853812, 30.349708],
                        },
                        {
                            title: 'Санкт-Петербург, ул Типанова, д.27/39, лит. А',
                            coords: [60.853812, 32.349708],
                        },
                    ],
            
                }
            </script>
            <script>
                $(function () {
                    const {throttle, debounce} = window.throttleDebounce
                    if (hdr_data) {
                        let cat_modal = new Vue({
                            el: '#cat-modal_delivery',
                            delimiters: ['[[', ']]'],
                            store: rushwork_store,
                            data: {
                                delivery: delivery_data.addresses,
                                search: ''
                            },
                            computed: {
                                ...Vuex.mapState('hdr', {
                                    item: state => state.item,
                                }),
            
                                items_length() {
                                    return typeof (this.item) != 'undefined' ? 1 : 0
                                },
                                item_img() {
                                    return typeof (this.item) != 'undefined' ? this.item['img'] : ''
                                },
                                vars() {
                                    return typeof (this.item) != 'undefined' ? this.item['vars'] : []
                                },
                            },
                            methods: {
                                showMap(e) {
                                    $('.modal-delivery__btns a').removeClass('active');
                                    $(e.target).addClass('active');
                                    $('.modal-delivery__body-container').hide();
                                    $('.modal-delivery__map').show();
                                    myMap.container.fitToViewport();
                                },
                                changeDelivery(resp) {
                                    this.delivery = resp;
                                    clusterer.removeAll()
                                    $.each(this.delivery, function (index, value) {
                                        clusterer.add(new ymaps.Placemark(value.coords));
                                        myMap.geoObjects.add(clusterer);
                                    })
                                    myMap.geoObjects.add(clusterer);
                                },
                                searchDelivery() {
                                    let data = {}, vm = this;
                                    data.search = vm.search;
                                    $.ajax({
                                        url: this.$store.state.ajaxURL,
                                        type: "POST",
                                        data: data
                                    }).done(function (resp) {
                                        if (resp.success) {
                                            vm.changeDelivery(resp.delivery)
                                        } else {
            
                                            $('#answer-status').addClass('error')
                                            $('#answer-title').html('Возникла ошибка связи с сервером')
                                            $('#answer-text').html('Повторите попытку позже!')
                                            $('#answer-modal').modal('show');
                                        }
                                    });
                                },
                                showList(e) {
                                    $('.modal-delivery__btns a').removeClass('active');
                                    $(e.target).addClass('active');
                                    $('.modal-delivery__map').hide();
                                    $('.modal-delivery__body-container').show();
                                }
                            },
                            mounted() {
                                let vm = this;
                                ymaps.ready(function () {
                                    myMap = new ymaps.Map('modal-delivery__map', {
                                        center: [59.938955, 30.315644],
                                        zoom: 10
                                    }, {
                                        searchControlProvider: 'yandex#search'
                                    });
            
                                    clusterer = new ymaps.Clusterer({
                                        clusterNumbers: [10],
                                    })
            
                                    geoObjects = [];
                                    $.each(vm.delivery, function (i, value) {
                                        geoObjects[i] = new ymaps.Placemark(value.coords, {}, {
                                            iconLayout: 'default#image',
                                            iconImageHref: 'static/img/general/map-center.png',
                                            iconImageSize: [32, 40],
                                            iconImageOffset: [-16, -20],
                                            balloonPanelMaxMapArea: 0,
                                            openEmptyBalloon: true
                                        });
                                        let placemark = geoObjects[i]
                                        geoObjects[i].events.add('balloonopen', function (e) {
                                            placemark.properties.set('balloonContent', "Идет загрузка данных...");
            
                                            ymaps.geocode(placemark.geometry.getCoordinates(), {
                                                results: 1
                                            }).then(function (res) {
                                                var newContent = res.geoObjects.get(0) ?
                                                    res.geoObjects.get(0).properties.get('name') :
                                                    'Не удалось определить адрес.';
            
                                                // Задаем новое содержимое балуна в соответствующее свойство метки.
                                                placemark.properties.set('balloonContent', newContent);
                                            });
            
                                        });
                                    })
            
                                    clusterer.add(geoObjects);
                                    myMap.geoObjects.add(clusterer);
            
            
                                });
                            }
                        });
                    }
                });
            </script>
            <script type="text/x-template" id="cat-modal-item">
                <div class="cat-table__row">
                    <div v-if="$store.state.mobileMode" class="cat-modal__checkbox">
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input"
                                   :id="'radio' + itemdata.id" name="cat-modal"
                                   :value="itemdata.id">
                            <label @click.prevent="onChange(itemdata.id)" class="custom-control-label"
                                   :for="'radio' + itemdata.id"></label>
                        </div>
                    </div>
                    <div class="cat-table__title">
                        <label :for="'radio' + itemdata.id" class="cat-modal__title">
                            <a href="itemdata.link" v-html="itemdata.title"></a>
                        </label>
                        <div class="cart-modal__params">
                            <div class="cat-modal__status">
                                <svg class="svg-icon mr-2" width="12" height="8" v-if="itemdata.status == 'В наличии'">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#check"></use>
                                </svg>
                                <svg class="svg-icon mr-2" width="12" height="12" v-if="itemdata.status == 'Под заказ'">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#time"></use>
                                </svg>
                                <span v-html="itemdata.status"></span>
                            </div>
                            <div class="cat-modal__delivery">
                                <svg class="svg-icon mr-2" width="16" height="12">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#delivery"></use>
                                </svg>
                                <span v-html="itemdata.date"></span>
                            </div>
                        </div>
                        <div class="cat-modal__collapse" v-if="$store.state.mobileMode">
                            <a class="link link_down" data-toggle="collapse" :href="'#collapse' + itemdata.id" role="button"
                               aria-expanded="false" aria-controls="collapseExample">
                                Характеристики
                            </a>
                            <div class="collapse" :id="'collapse' + itemdata.id">
                                <div class="text py-2">
                                    <dl v-for="(param, id) in itemdata.params">
                                        <dt v-html="param.title"></dt>
                                        <dd v-html="param.value"></dd>
                                    </dl>
            
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <div v-for="(param, id) in itemdata.params" v-if="!$store.state.mobileMode" v-html="param.value"></div>
                    <!--<div class="cat-table__last flex-nosmall" v-if="itemdata.new_price == 0">
                        <a href="#bell-modal" data-dismiss="modal" data-toggle="modal" class="btn btn-outline-light text-primary font-weight-normal w-100">
                            Цена по запросу
                        </a>
                    </div>-->
                    <div class="cat-table__last">
                        <div class="cat-modal__prices"  v-if="itemdata.new_price != 0">
                            <div class="cat-modal__price pr-lg-2" v-html="numberWithSpaces(itemdata.new_price) + ' руб.'"></div>
                            <div class="cat-modal__price_old pr-lg-2" v-html="numberWithSpaces(itemdata.old_price) + ' руб.'"></div>
                            <div class="cat-modal__sale" v-html="itemdata['sale']"
                                 v-if="!$store.state.mobileMode && itemdata['sale'] != '0'"></div>
                        </div>
                        <div class="cat-modal__prices"  v-if="itemdata.new_price == 0">
                            <a href="#bell-modal" data-dismiss="modal" data-toggle="modal" class="cat-modal__price">Цена по запросу</a>
                        </div>
                        <div :class="['cat-modal_add', isInCart ? 'bg-secondary' : 'bg-primary']" v-if="!$store.state.mobileMode">
                            <svg class="svg-icon" width="23" height="20">
                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#cart"></use>
                            </svg>
                            <span v-html="isInCart ? 'В корзине' : 'В корзину'"></span>
                            <div class="form-group mb-0">
                                <span class="input-btn" @click="handleCounter('down', $event)">—</span>
                                <input class="form-control" :value="selectedCount"
                                       @keydown.enter.prevent="changeInput($event)" type="number">
                                <span class="input-btn" @click="handleCounter('up', $event)">+</span>
                            </div>
                        </div>
                        <div class="cat-modal__btns" v-if="!$store.state.mobileMode">
                            <a href="#" @click.prevent="toggleFav()" class="cat-modal__btn" :class="{'active': isInFav}"
                               :title="isInFav ? 'Убрать из избранного' : 'В избранное'">
                                <svg class="svg-icon mr-2" width="14" height="19">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#bookmark"></use>
                                </svg>
                                <span>В избранное</span>
                            </a>
                            <a href="#" @click.prevent="toggleComp" class="cat-modal__btn" :class="{'active': isInComp}"
                               :title="isInComp ? 'Убрать из сравнения' : 'Сравнить'">
                                <svg class="svg-icon mr-2" width="14" height="18">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#compare"></use>
                                </svg>
                                <span>Сравнить</span>
                            </a>
                        </div>
                        <div class="cat-modal_footer" :id="'cat-modal_footer-' + itemdata.id"
                             v-if="this.$store.state.mobileMode">
                            <div :class="['cat-modal_add mr-auto ml-0 my-0', isInCart ? 'bg-secondary' : 'bg-primary']">
                                <svg class="svg-icon mr-2 mr-sm-0" width="23" height="20">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#cart"></use>
                                </svg>
                                <span class="d-none d-sm-block" v-html="isInCart ? 'В корзине' : 'В корзину'"></span>
                                <div class="form-group mb-0">
                                    <span class="input-btn" @click="handleCounter('down', $event)">—</span>
                                    <input class="form-control" :value="selectedCount"
                                           @keydown.enter.prevent="changeInput($event)" type="number">
                                    <span class="input-btn" @click="handleCounter('up', $event)">+</span>
                                </div>
                            </div>
                            <a href="#" class="cat-modal_incart">
                                Перейти в&nbsp;корзину
                            </a>
                            <!--<a href="#" @click.prevent="toggleFav" class="cat-modal__btn mx-auto" :class="{'active': isInFav}"
                               :title="isInFav ? 'Убрать из избранного' : 'В избранное'">
                                <svg class="svg-icon mr-2" width="14" height="19">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#bookmark"></use>
                                </svg>
                                <span class="d-none d-sm-block">В избранное</span>
                            </a>
                            <a href="#" @click.prevent="toggleComp" class="cat-modal__btn mx-auto" :class="{'active': isInComp}"
                               :title="isInComp ? 'Убрать из сравнения' : 'Сравнить'">
                                <svg class="svg-icon mr-2" width="14" height="18">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#compare"></use>
                                </svg>
                                <span class="d-none d-sm-block">Сравнить</span>
                            </a>-->
                        </div>
                    </div>
                </div>
            </script>


            <script>
                $(function () {
                    const {throttle, debounce} = window.throttleDebounce
                    Vue.component('cat-modal-item', {
                        delimiters: ['[[', ']]'],
                        data() {
                            return {
                                selectedCount: this.itemdata['amount'],
                            }
                        },
                        props: {
                            itemdata: Object,
                            id: String,
                        },
                        watch: {},
                        computed: {
                            isInFav() {
                                return this.$store.state.hdr.favorites.indexOf(this.itemdata.id) >= 0
                            },
                            isInCart() {
                                return this.$store.state.hdr.cart_items.indexOf(this.itemdata.id) >= 0
                            },
                            isInComp() {
                                return this.$store.state.hdr.comparison.indexOf(this.itemdata.id) >= 0
                            }
                        },
                        methods: {
                            numberWithSpaces: function (x) {
                                return x.toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
                            },
                            decrease() {
                                if (this.selectedCount > 0) {
                                    this.selectedCount = this.selectedCount - 1;
                                }
                            },
                            increase() {
                                this.selectedCount = this.selectedCount + 1;
                            },
                            onChange(id) {
                                console.log(this.itemdata.new_price)
                                if (this.$store.state.mobileMode) {
                                    if ($('#cat-modal_footer-' + id).css('display') == "flex" && this.itemdata.new_price > 0) {
                                        $('.cat-table__row').removeClass('active');
                                        $('#cat-modal_footer-' + id).parents('.cat-table__row').removeClass('active');
                                        $('.cat-modal_footer').hide();
                                        $(event.target).parents('.custom-control').find('input:first').prop("checked", false);
                                    } else {
                                        $('.cat-table__row').removeClass('active');
                                        $('.cat-modal_footer').hide();
                                        $('#cat-modal_footer-' + id).parents('.cat-table__row').addClass('active');
                                        $('#cat-modal_footer-' + id).css('display', 'flex');
                                        $(event.target).parents('.custom-control').find('input:first').prop("checked", true);
                                    }
                                } else {
                                    $('.cat-modal_row').removeClass('active');
                                }
                            },
                            handleCounter(dir, e) {
                                let vm = this
                                if (!this.counterBusy) {
                                    this.counterActive = true
            
                                    if (dir == "up") vm.increase()
                                    else if (dir == "down") vm.decrease()
                                    vm.freezeValue();
                                }
                            },
                            checkNumber(e) {
                                let val = parseFloat(e.target.value)
            
                                if (isNaN(val) || 0 > val) {
                                    this.selectedCount = 0
                                } else {
                                    this.selectedCount = val
                                }
                            },
                            changeInput(e) {
                                let vm = this
                                this.selectedCount = $(e.target).val() * 1;
                                vm.freezeValue();
                            },
                            freezeValue() {
                                this.updateCart(this)
                            },
            
                            updateCart: debounce(1000, (vm) => {
                                if (!isNaN(parseFloat(vm.selectedCount))) {
                                    vm.$store.dispatch('hdr/cartAction', {
                                        act: 'UpdateCart',
                                        itemdata: vm.itemdata,
                                        amount: vm.selectedCount,
                                        var_id: vm.id,
                                    })
                                }
                            }),
            
                            toggleFav(id) {
                                this.$store.dispatch('hdr/pushFav', {
                                    id: this.itemdata.id,
                                })
                            },
                            toggleComp(id) {
                                this.$store.dispatch('hdr/pushСomp', {
                                    id: this.itemdata.id,
                                })
                            },
                        },
                        template: '#cat-modal-item'
                    })
                });
            </script>
            <div class="modal modal-simple modal-city fade" id="city-modal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title">Выберите ваш город</h2>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <svg class="svg-icon" width="21" height="21">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                </svg>
                            </button>
                        </div>
                        <div class="modal-search">
                            <form class="w-100 input-group mx-auto">
                                <div class="input-group-append">
                                    <button class="btn btn-white btn-sm" @click="getSearch">
                                        <svg class="svg-icon mr-1" width="18" height="18">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#search"></use>
                                        </svg>
                                    </button>
                                </div>
                                <input type="search" class="form-control" placeholder="Поиск" v-model="searchStr" aria-label="Поиск" @keydown="getSearch" @keydown.enter.prevent="getSearch">
                            </form>
                        </div>
                        <div class="modal-body">
                            <div class="city-menu text">
                                <div class="city-menu__item" v-for="(cItem, id,  idx) in result">
                                    <div class="city-menu__title" v-html="id"></div>
                                    <ul class="city-menu__list">
                                        <li v-for="(bItem, id,  idx) in cItem"><span v-html="bItem.title" @click="changeCity(bItem.title)">Город 1</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <script>
                let city_modal = new Vue({
                    el: "#city-modal",
                    store: rushwork_store,
                    data: {
                        searchStr: '',
                        result: {},
                        city: {
                            "А": [
                                {"title": "Город 1"},
                                {"title": "Город 2"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                            ],
                            "Б": [
                                {"title": "Город 1"},
                                {"title": "Город 2"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                                {"title": "Город 1"},
                                {"title": "Город 2"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                                {"title": "Город 1"},
                                {"title": "Город 2"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                            ],
                            "В": [
                                {"title": "Город 1"},
                                {"title": "Город 2"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                            ],
                            "Г": [
                                {"title": "Город 1"},
                                {"title": "Город 2"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                            ],
                            "Д": [
                                {"title": "Город 1"},
                                {"title": "Город 2"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                            ],
                            "Е": [
                                {"title": "Город 1"},
                                {"title": "Город 2"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                                {"title": "Город 3"},
                                {"title": "Город 4"},
                                {"title": "Город 5"},
                            ],
                        }
                    },
                    created() {
                        this.getSearch()
                    },
                    computed: {},
                    methods: {
                        changeCity(title) {
                            this.$store.commit('hdr/change_city', title);
                            $("#city-modal").modal('hide');
                        },
                        getSearch() {
                            Object.filter = (obj, predicate) =>
                                Object.keys(obj)
                                    .filter(key => predicate(obj[key]))
                                    .reduce((res, key) => (res[key] = obj[key], res), {});
                            for (key in this.city) {
                                Vue.set(this.result, key, Object.filter(this.city[key], city => {
                                    return city.title.toLowerCase().includes(this.searchStr);
                                }))
                            }
                        }
                    },
            
                })
            </script>

            <div class="modal modal-simple modal-user fade" id="user-modal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content tab-content">
                        <div class="tab-pane active fade show" id="login-form" role="tabpanel">
                            <div class="modal-header">
                                <h2 class="modal-title">Вход в кабинет</h2>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <svg class="svg-icon" width="21" height="21">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                    </svg>
                                </button>
                            </div>
                            <form class="modal-body pt-0">
                                <div class="form-group form-group-text">
                                    <input class="form-control" type="text" placeholder="Логин" id="login-name" name="name" required>
                                    <label for="login-name">Ваше имя</label>
                                </div>
                                <div class="form-group form-group-text">
                                    <input class="form-control" autocomplete="off" type="password" placeholder="Пароль" id="login-password" name="password" required>
                                    <label for="login-name">Пароль</label>
                                </div>
                                <button type="submit" class="btn btn-primary w-100 mt-2">Войти</button>
                                <div class="d-flex justify-content-between align-items-center bb-1 py-2">
                                    <a class="text text-primary" data-toggle="list" href="#password-form" role="tab" aria-selected="false">Забыли пароль?</a>
                                    <a class="text text-primary" data-toggle="list" href="#reg-form" role="tab" aria-selected="false">Регистрация</a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between pt-3">
                                    <h3 class="mb-0">Войти через соц.сеть</h3>
                                    <div class="social-btns">
                                        <a href="#" class="social-btn social-btn_facebook">
                                            <svg class="svg-icon" width="8" height="16">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#facebook"></use>
                                            </svg>
                                        </a>
                                        <a href="#" class="social-btn social-btn_gmail">
                                            <svg class="svg-icon" width="19" height="12">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#gmail"></use>
                                            </svg>
                                        </a>
                                        <a href="#" class="social-btn social-btn_vk">
                                            <svg class="svg-icon" width="21" height="12">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#vk"></use>
                                            </svg>
                                        </a>
                                        <a href="#" class="social-btn social-btn_ok">
                                            <svg class="svg-icon" width="16" height="16">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#ok"></use>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div class="tab-pane fade" id="reg-form" role="tabpanel">
                            <div class="modal-header">
                                <h2 class="modal-title">Регистрация</h2>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <svg class="svg-icon" width="21" height="21">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                    </svg>
                                </button>
                            </div>
                            <form class="modal-body pt-0">
                                <div class="form-group form-group-text">
                                    <input class="form-control" type="text" placeholder="ФИО" id="reg-fio" autocomplete="off" name="password" required>
                                    <label for="reg-fio">ФИО <span>*</span>
                                    </label>
                                </div>
                                <div class="form-group form-group-text">
                                    <input class="form-control" type="text" placeholder="Телефон" id="reg-phone" data-inputmask="'mask': '+7 (999) 999 - 99 - 99'" name="phone" required>
                                    <label for="reg-phone">Телефон <span>*</span>
                                    </label>
                                </div>
                                <div class="form-group form-group-text">
                                    <input class="form-control" type="email" placeholder="E-mail" id="reg-email" name="email" required>
                                    <label for="login-name">E-mail <span>*</span>
                                    </label>
                                </div>
                                <div class="bb-1 pb-3">
                                    <button type="submit" class="btn btn-primary w-100 mt-2">Зарегистрироваться</button>
                                </div>
                                <div class="d-flex align-items-center justify-content-between pt-3">
                                    <h3 class="mb-0">Регистрация через соц.сеть</h3>
                                    <div class="social-btns">
                                        <a href="#" class="social-btn social-btn_facebook">
                                            <svg class="svg-icon" width="8" height="16">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#facebook"></use>
                                            </svg>
                                        </a>
                                        <a href="#" class="social-btn social-btn_gmail">
                                            <svg class="svg-icon" width="19" height="12">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#gmail"></use>
                                            </svg>
                                        </a>
                                        <a href="#" class="social-btn social-btn_vk">
                                            <svg class="svg-icon" width="21" height="12">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#vk"></use>
                                            </svg>
                                        </a>
                                        <a href="#" class="social-btn social-btn_ok">
                                            <svg class="svg-icon" width="16" height="16">
                                                <use xlink:href="static/img/svg-sprite/svg-symbols.svg#ok"></use>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="password-form" role="tabpanel">
                            <div class="modal-header">
                                <h2 class="modal-title">Восстановление пароля</h2>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <svg class="svg-icon" width="21" height="21">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                    </svg>
                                </button>
                            </div>
                            <form class="modal-body pt-0">
                                <div class="form-group">
                                    <input class="form-control" type="text" placeholder="Логин">
                                </div>
                                <button type="submit" class="btn btn-primary w-100 mt-2">Восстановить пароль</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal modal-simple modal-user modal-answer fade" id="answer-modal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-body">
                            <figure class="modal-status " id="answer-status"></figure>
                            <h2 class="modal-title" id="answer-title">Ваше письмо успешно отправленно</h2>
                            <div class="modal-text" id="answer-text">Благодарим что выбрали нас!</div>
                            <button type="button" class="btn btn-primary btn-modal" data-dismiss="modal" aria-label="Close">
                                Отлично!
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal modal-simple modal-config fade" id="config-modal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div class="modal-config-picture">
                                <button type="button" class="close d-sm-none" data-dismiss="modal" aria-label="Close">
                                    <svg class="svg-icon" width="21" height="21">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                    </svg>
                                </button>
                                <h2 class="modal-config-title">Подбор оборудования по&nbsp;спецификации</h2>
                                <div class="modal-config-links">
                                    <a href="tel:+74952928793">+7 (495) 292-87-93</a>
                                    <a href="mailto:zakaz@rashwork.com">zakaz@rashwork.com</a>
                                </div>
                            </div>
                            <div class="modal-config-caption">
                                <button type="button" class="close d-none d-sm-block" data-dismiss="modal" aria-label="Close">
                                    <svg class="svg-icon" width="21" height="21">
                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                    </svg>
                                </button>
                                <p class="modal-config-text">Заполните форму и прикрепите ваш файл‑спецификацию</p>
                                <form class="modal-config-form" id="modal-config-form">
                                    <div class="form-group mb-lg-1">
                                        <input class="form-control" type="text" placeholder="Ваше имя" name="name">
                                    </div>
                                    <div class="form-group form-group-text">
                                        <input class="form-control required" type="text" data-inputmask="'mask': '+7 (999) 999 - 99 - 99'" placeholder="+7 (XXX) XXX_XX_XX" id="phone" autocomplete="off" name="phone">
                                        <label for="phone">+7 (XXX) XXX_XX_XX <span>*</span>
                                        </label>
                                        <label class="label-error">Обязательное поле</label>
                                    </div>
                                    <div class="form-group">
                                        <output class="output-list" id="config-list"></output>
                                        <input class="form-file form-file-sm" type="file" name="file[]" multiple="multiple" id="config-form-file" accept=".doc,.xls,.rtf,.pdf,.jpg,.png" data-size="10">
                                        <label for="config-form-file" class="btn btn-outline-primary w-100">
                                            <span class="form-file__title">Прикрепите файл</span>
                                            <span class="form-file__names"></span>
                                        </label>
                                        <small class="text-center mt-0">DOC, XLS, RTF, PDF, JPG, PNG до 10
                                    мб</small>
                                    </div>
                                    <button type="submit" class="btn btn-secondary btn-sm justify-content-between w-100">
                                        <span>Отправить спецификацию</span>
                                        <svg class="svg-icon ml-1" width="22" height="22">
                                            <use xlink:href="static/img/svg-sprite/svg-symbols.svg#file"></use>
                                        </svg>
                                    </button>

                                    <small>Нажимая на&nbsp;кнопку &laquo;Отправить&raquo;
                                я&nbsp;даю согласие на&nbsp;<a href="#">обработку персональных данных</a></small>
                                </form>

                                <div class="modal fade" id="modal-error" tabindex="-1" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header align-items-center py-3">
                                                <h3 class="modal-title">Размер файла превышает</h3>
                                                <button class="close py-0" data-dismiss="modal" aria-label="Close">
                                                    <svg class="svg-icon ml-3" width="22" height="22">
                                                        <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                                    </svg>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <script>
                $("#modal-config-form").submit(function( event ) {
                    let error = 0;
                    let data = $(this).serializeArray();
                    $(this).find('input.required').each(function () {
                        if (!$(this).val()) {
                            error = 1
                            $(this).addClass('error')
                        } else {
                            $(this).addClass('correct')
                        }
                    })
                    if (error == 0) {
                        data.push({'name': 'action', 'value': 'sendConfig'});
                        $.ajax({
                            url: this.$store.state.ajaxURL,
                            type: "POST",
                            data: data
                        }).done(function (resp) {
                            if (resp.success) {
                                $('#answer-status').removeClass('error')
                                $('#answer-title').html('Ваше сообщение отправлено, мы обязательно свяжемся с Вами!')
                                $('#answer-text').html('Благодарим что выбрали нас!')
                                $('#answer-modal').modal('show');
                            } else {
                                $('#answer-status').addClass('error')
                                $('#answer-title').html('Возникла ошибка связи с сервером')
                                $('#answer-text').html('Повторите попытку позже!')
                                $('#answer-modal').modal('show');
                            }
                        });
                    } else {
                        return false;
                    }
                });
            </script>

            <div class="modal modal-simple modal-user fade" id="bell-modal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title">Связаться со специалистом</h2>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <svg class="svg-icon" width="21" height="21">
                                    <use xlink:href="static/img/svg-sprite/svg-symbols.svg#close"></use>
                                </svg>
                            </button>
                        </div>
                        <form class="modal-body pt-0">
                            <p class="text">Заполните форму обратной связи и мы перезвоним вам в течении 15 минут</p>
                            <div class="form-group form-group-text">
                                <input class="form-control" placeholder="placeholder" type="text" id="bell-name" name="name">
                                <label for="bell-name">Ваше имя</label>
                            </div>
                            <div class="form-group form-group-text">
                                <input class="form-control" data-inputmask="'mask': '+7 (999) 999 - 99 - 99'" placeholder="placeholder" type="text" id="bell-phone" name="phone" required="">
                                <label for="bell-phone">+7 (___) ___ - __ - __ <span>*</span>
                                </label>
                            </div>
                            <a href="#" class="btn btn-primary w-100 btn-md mt-2">
                        Заказать звонок
                    </a>
                            <small class="text-agree mt-2">Нажимая на&nbsp;кнопку «Отправить»
                        я&nbsp;даю согласие на&nbsp;<a href="#">обработку персональных данных</a></small>
                        </form>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Плагины, загруженные по ссылке
	https://cdn.jsdelivr.net/combine/npm/swiper@6.3/swiper-bundle.min.js,npm/@fancyapps/fancybox@3.5/dist/jquery.fancybox.min.js,npm/overlayscrollbars@1.13/js/jquery.overlayScrollbars.min.js,npm/hc-sticky@2.2/dist/hc-sticky.min.js,npm/lozad/dist/lozad.min.js
-->
        <script src="static/js/separate-js/page-end-plugins.js"></script>

        <!-- 	Общий скрипт	 -->
        <script src="static/js/common.js" charset="utf-8"></script>


    </body>

</html>
